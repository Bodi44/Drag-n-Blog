(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){e.exports=a(298)},128:function(e,t,a){"use strict";a.r(t),a.d(t,"get",function(){return o}),a.d(t,"post",function(){return i}),a.d(t,"put",function(){return s}),a.d(t,"del",function(){return l});var n=a(3),r=a.n(n),c=a(10),o=function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(r.a.mark(function e(t,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify(a),method:"POST"});case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(r.a.mark(function e(t,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify(a),method:"PUT"});case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark(function e(t,a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify(a),method:"DELETE"});case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},129:function(e,t,a){},238:function(e,t,a){},239:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},257:function(e,t,a){},297:function(e,t,a){},298:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(67),o=a.n(c),i=a(19),s=a(113),l=a(24),u=a(3),d=a.n(u),m=a(10),h=a(5),p=a(6),f=a(128),g=function(){function e(t){var a=this;Object(h.a)(this,e),this.create=function(){var t=Object(m.a)(d.a.mark(function t(n){var r,c,o,i,s,l;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.id,c=n.title,o=n.content,i=n.author,s=n.tags,l=e.dateToString(new Date),t.next=4,a.createFromJson({id:r,title:c,content:o,date:l,author:i,tags:s});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),this.url=t}return Object(p.a)(e,[{key:"normalize",value:function(t){return t.forEach(function(t){return e.normalizeSingle(t)}),t}},{key:"get",value:function(){var e=Object(m.a)(d.a.mark(function e(t){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get(t);case 2:return a=e.sent,e.abrupt("return",this.normalize(a));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getById",value:function(){var e=Object(m.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get(this.url+"?id="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createFromJson",value:function(){var t=Object(m.a)(d.a.mark(function t(a){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.post(this.url,a);case 2:return n=t.sent,t.abrupt("return",e.normalizeSingle(n));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(m.a)(d.a.mark(function t(a,n){var r;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.put(this.url+"/"+a,{title:n.title,content:n.content,date:e.dateToString(new Date),author:n.author,tags:n.tags});case 2:return r=t.sent,t.abrupt("return",e.normalizeSingle(r));case 4:case"end":return t.stop()}},t,this)}));return function(e,a){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(m.a)(d.a.mark(function t(a){var n;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.del(this.url+"/"+a);case 2:return n=t.sent,t.abrupt("return",e.normalizeSingle(n));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],[{key:"normalizeSingle",value:function(e){return e.date=new Date(e.date),e}},{key:"dateToString",value:function(e){return e.toISOString().substring(0,10)}}]),e}(),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ARTICLE":return[].concat(Object(l.a)(e),[{id:t.id,title:t.title,content:t.content,date:t.date,author:t.author,tags:t.tags}]);case"REMOVE_ARTICLE":return e.filter(function(e){return e.id!==t.id});case"UPDATE_ARTICLE":var a=Object.assign({},e);return Object.keys(a).forEach(function(e){a[e].id===t.id&&(a[e].title=t.title,a[e].content=t.content,a[e].date=g.dateToString(new Date),a[e].author=t.author,a[e].tags=t.tags)}),a;default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_LAYOUT_ARTICLE":return[].concat(Object(l.a)(e),[{id:t.id,title:t.title,content:t.content,date:t.date,author:t.author,tags:t.tags}]);case"REMOVE_LAYOUT_ARTICLE":return e.filter(function(e){return e.id!==t.id});case"UPDATE_LAYOUT_ARTICLE":var a=Object.assign({},e);return Object.keys(a).forEach(function(e){a[e].id===t.id&&(a[e].title=t.title,a[e].content=t.content,a[e].date=g.dateToString(new Date),a[e].author=t.author,a[e].tags=t.tags)}),a;default:return e}},b=Object(i.combineReducers)({articleReducer:v,layoutReducer:_}),y=a(300),E=a(71),j=a(114),O=a(299),w=(a(129),function(){return r.a.createElement(E.a,{to:"/write_blog",className:"Header__write-blog"},r.a.createElement("span",{className:"Header__write-blog_centered"},"Write New Blog!"))}),D=function(){return r.a.createElement("div",{className:"Header"},r.a.createElement("div",{className:"Header__top-content"},r.a.createElement("div",{className:"Header__top-content_left"},r.a.createElement("h1",{className:"Header__logo Header__logo_main"},"Drag'n'Blog"),r.a.createElement("p",{className:"Header__logo Header__logo_secondary"},"flexible-blog")),r.a.createElement("div",{className:"Header__top-content_right"},r.a.createElement("form",{action:"",className:"Header__search"},r.a.createElement("input",{className:"Header__input",placeholder:"Search"})),r.a.createElement(j.a,{exact:!0,path:"/",component:w}),r.a.createElement(j.a,{exact:!0,path:"/layout",component:w}),r.a.createElement(E.a,{to:"/",className:"Header__user"},"User"))),r.a.createElement("nav",{className:"Header__navigation"},r.a.createElement(O.a,{exact:!0,to:"/",className:"Header__nav-link",activeClassName:"Header__nav-link_active",children:"Home"}),r.a.createElement(O.a,{to:"/layout",className:"Header__nav-link",activeClassName:"Header__nav-link_active",children:"Posts"})))},A=(a(48),function(e){return r.a.createElement("div",{className:"container_12"},r.a.createElement("header",{className:"grid_12"},r.a.createElement(D,null)),e.children)}),N=a(11),k=a(68),C=a.n(k),S=a(8),T=a(7),I=a(9),x=a(46),L=a.n(x),H=(a(238),{beginDrag:function(e){return console.log(e),e.article},endDrag:function(e,t){var a=t.getDropResult();a&&a.containerId!==e.containerId&&e.itemDeleter(e.article.id)}}),P=function(e){function t(){return Object(h.a)(this,t),Object(S.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.isDragging,n=t.connectDragSource,c=t.article,o=a?0:1;return n(r.a.createElement("li",{className:"Article",style:{opacity:o}},r.a.createElement("h4",{className:"Article__title"},c.title),r.a.createElement("div",{className:"Article__modifiers"},r.a.createElement("button",{className:"Article__remove",onClick:function(){return e.props.itemDeleter(c.id)}},"X"),r.a.createElement(E.a,{to:{pathname:"/write_blog",state:{data:c}},className:"Article__edit"},"Edit")),r.a.createElement("p",{className:"Article__content"},c.content.split(" ").slice(0,50).join(" ")),r.a.createElement("small",{className:"Article__author"},c.author),r.a.createElement("time",{className:"Article__date"},c.date)))}}]),t}(n.Component),U=Object(N.DragSource)("Article",H,function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}})(P),R=(a(239),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(S.a)(this,Object(T.a)(t).call(this,e))).deleteItem=function(e){var t=new g(a.props.serverUrl+"articles"),n=a.state.articles.filter(function(t){return t.id!==e});a.setState({articles:n}),t.delete(e)},a.addItem=function(e){var t=new g(a.props.serverUrl+"articles");a.setState(L()(a.state,{articles:{$push:[e]}})),t.create(e)},a.getHoveredColor=function(e,t){return e&&t?"#2ecc71":e&&!t?"#e74c3c":"#ecf0f1"},a.state={articles:[]},a}return Object(I.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.serverUrl+"articles").then(function(e){return e.json()}).then(function(t){e.setState({articles:t})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.connectDropTarget,n=t.hovered,c=t.canDrop,o=t.containerId,i=this.state.articles,s=this.getHoveredColor(n,c);return a(r.a.createElement("aside",{className:"Sidebar",style:{background:s}},r.a.createElement("ul",{className:"Sidebar__blog-list"},i.map(function(t){return r.a.createElement(U,{article:t,key:t.id,containerId:o,itemDeleter:e.deleteItem})}))))}}]),t}(n.Component)),B=Object(N.DropTarget)("Article",{drop:function(e,t,a){var n=e.containerId;return 0===a.state.articles.filter(function(e){return e.id===t.getItem().id}).length&&a.addItem(t.getItem()),{containerId:n}},canDrop:function(e,t){return""!==t.getItem().content}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem(),canDrop:t.canDrop()}})(R),V=a(69),z=a.n(V),F=(a(249),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(c)))).addItemToContainer=function(e,t,n){var r=new g(n+"layoutContainers");a.props.updateArticle(e,t),r.update(e,t)},a.getHoveredColor=function(e,t){return e&&t?"#2ecc71":e&&!t?"#e74c3c":"white"},a.checkIfEmpty=function(e,t,a){return e.content?r.a.createElement("div",{className:"LayoutArticle",style:{background:t}},r.a.createElement("h2",{className:"LayoutArticle__title"},e.title),r.a.createElement("button",{className:"LayoutArticle__remove",onClick:function(){return a(e.id)}},"X"),r.a.createElement("p",{className:"LayoutArticle__content"},e.content.split(" ").slice(0,100).join(" ")),r.a.createElement("small",{className:"LayoutArticle__author"},e.author),r.a.createElement("time",{className:"LayoutArticle__date"},e.date)):r.a.createElement("div",{className:"LayoutArticle",style:{background:t}},"Container",r.a.createElement("button",{className:"LayoutArticle__remove",onClick:function(){return a(e.id)}},"X"))},a}return Object(I.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.connectDropTarget,a=e.connectDragSource,n=e.hovered,r=e.canDrop,c=e.article,o=this.getHoveredColor(n,r);return a(t(this.checkIfEmpty(c,o,this.props.removeArticle)))}}]),t}(n.Component)),J=z()(Object(N.DropTarget)("Article",{drop:function(e,t,a){var n=e.articleId;return 2===n&&a.addItemToContainer(e.article.id,t.getItem(),e.serverUrl),{articleId:n}},canDrop:function(e,t){var a=e.layoutArticles.filter(function(e){return e.id===t.getItem().id});return""===e.article.content&&0===a.length}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem(),canDrop:t.canDrop()}}),Object(N.DragSource)("Article",{beginDrag:function(e){return e.article},endDrag:function(e,t){null!==t.getDropResult()&&t.getDropResult()!==e.articleId&&e.removeArticle(e.article.id)}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(F),M=function(){return"_"+Math.random().toString(36).substr(2,7)},W=(a(250),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={layoutArticles:[]},a.addArticleToLayout=function(){var e=new g(a.props.serverUrl+"layoutContainers"),t={title:"",content:"",date:g.dateToString(new Date),author:"",id:M()};a.setState(L()(a.state,{layoutArticles:{$push:[t]}})),e.create(t)},a.updateArticleInLayout=function(e,t){var n=Object.assign({},a.state.layoutArticles);Object.keys(n).forEach(function(a){n[a].id===e&&(n[a].title=t.title,n[a].content=t.content,n[a].date=g.dateToString(new Date),n[a].author=t.author)}),a.setState({newState:n})},a.removeArticleFromLayout=function(e){var t=new g(a.props.serverUrl+"layoutContainers"),n=a.state.layoutArticles.filter(function(t){return t.id!==e});a.setState({layoutArticles:n}),t.delete(e)},a}return Object(I.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(this.props.serverUrl+"layoutContainers").then(function(e){return e.json()}).then(function(t){e.setState({layoutArticles:t})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.serverUrl,n=t.containerId,c=this.state.layoutArticles;return r.a.createElement("div",{className:"BlogTable"},c.map(function(t){return r.a.createElement(J,{layoutArticles:c,article:t,articleId:n,key:t.id,serverUrl:a,updateArticle:e.updateArticleInLayout,removeArticle:e.removeArticleFromLayout})}),r.a.createElement("button",{className:"BlogTable__add-container",onClick:this.addArticleToLayout},"Add container"))}}]),t}(n.Component)),X=(a(251),Object(N.DragDropContext)(C.a)(function(){return r.a.createElement("main",{className:"MainPage"},r.a.createElement(B,{containerId:1,serverUrl:"http://localhost:3001/"}),r.a.createElement(W,{containerId:2,serverUrl:"http://localhost:3001/"}))})),Y=(a(252),function(e){var t=e.post;return r.a.createElement(E.a,{to:{pathname:"/view_post",state:{data:t}},className:"PostContainer"},r.a.createElement("h2",{className:"PostContainer__title"},t.title),r.a.createElement("p",{className:"PostContainer__content"},t.content.split(" ").slice(0,100).join(" ")),r.a.createElement("small",{className:"PostContainer__author"},t.author),r.a.createElement("time",{className:"PostContainer__date"},t.date))}),$=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(S.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={postsContainers:[]},a}return Object(I.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:3001/layoutContainers").then(function(e){return e.json()}).then(function(t){e.setState({postsContainers:t})})}},{key:"render",value:function(){return this.state.postsContainers.map(function(e){return r.a.createElement(Y,{post:e,key:e.id})})}}]),t}(n.Component),q=a(110),G=a(111),K=a.n(G),Q=a(112),Z=(a(257),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(S.a)(this,Object(T.a)(t).call(this,e))).handleTagsDelete=function(e){var t=a.state.tags;a.setState({tags:t.filter(function(t,a){return a!==e})})},a.handleTagsAddition=function(e){a.setState(function(t){return{tags:[].concat(Object(l.a)(t.tags),[e])}})},a.handleSubmit=function(e){var t=new g("http://localhost:3001/articles"),n=a.state.id;void 0===a.props.location.state?t.create(a.state):t.update(n,a.state),a.props.history.push("/"),e.preventDefault()},a.handleChange=function(e){e.preventDefault(),a.setState(Object(q.a)({},e.target.name,e.target.value))},a.state=e.location.state?e.location.state.data:{id:M(),title:"",content:"",author:"",tags:[]},a}return Object(I.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.keyCodes,t=[e.comma,e.enter],a=this.state.tags;return r.a.createElement("form",{className:"WriteBlog",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"WriteBlog__title",placeholder:"Title",name:"title",onChange:this.handleChange,defaultValue:this.state.title}),r.a.createElement("input",{className:"WriteBlog__author",placeholder:"Author",name:"author",onChange:this.handleChange,defaultValue:this.state.author}),r.a.createElement("div",null,r.a.createElement(Q.WithContext,{tags:a,placeholder:"#add tags",handleDelete:this.handleTagsDelete,handleAddition:this.handleTagsAddition,delimiters:t,allowDragDrop:!1})),r.a.createElement("div",null,r.a.createElement(K.a,{className:"WriteBlog__content",name:"content",placeholder:"Tell us your story...",onChange:this.handleChange,defaultValue:this.state.content})),r.a.createElement("button",{className:"WriteBlog__publish-button",type:"submit"},"Ready To Publish?"))}}]),t}(n.Component));Z.defaultProps={keyCodes:{comma:188,enter:13}};a(297);var ee=function(e){var t=e.location.state.data;return r.a.createElement("div",{className:"ViewPost"},r.a.createElement("h1",{className:"ViewPost__title"},t.title),r.a.createElement("h3",{className:"ViewPost__author"},t.author),r.a.createElement("p",{className:"ViewPost__content"},t.content),r.a.createElement("ul",{className:"ViewPost__tags"},t.tags.map(function(e){return r.a.createElement("li",{className:"ViewPost__tags_tag"},e.text)})))},te=function(){return r.a.createElement("main",{className:"grid_12"},r.a.createElement(j.a,{exact:!0,path:"/",component:X}),r.a.createElement(j.a,{path:"/layout",component:$}),r.a.createElement(j.a,{path:"/write_blog",component:Z}),r.a.createElement(j.a,{path:"/view_post",component:ee}))},ae=function(){return r.a.createElement(y.a,null,r.a.createElement(A,null,r.a.createElement(te,null)))},ne=Object(i.createStore)(b);console.log(ne.getState()),o.a.render(r.a.createElement(s.a,{store:ne},r.a.createElement(ae,null)),document.getElementById("root"))},48:function(e,t,a){}},[[115,1,2]]]);
//# sourceMappingURL=main.0efb4ed3.chunk.js.map