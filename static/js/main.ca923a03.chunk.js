(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){e.exports=n(264)},22:function(e,t,n){},250:function(e,t,n){"use strict";n.r(t),n.d(t,"get",function(){return o}),n.d(t,"post",function(){return i}),n.d(t,"put",function(){return u}),n.d(t,"del",function(){return s});var r=n(2),a=n.n(r),c=n(4),o=function(){var e=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(c.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n),method:"POST"});case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n),method:"PUT"});case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),s=function(){var e=Object(c.a)(a.a.mark(function e(t,n){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n),method:"DELETE"});case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},260:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(98),o=n.n(c),i=n(266),u=n(12),s=function(e){var t=e.children,n=e.store;return a.a.createElement(u.a,{store:n},a.a.createElement(i.a,null,t))},l=n(107),d=n(13),f=n(101),p=n.n(f),m=n(5),h=n(29),E=n(30),w=n(50),g=n(48),v=n(51),O=n(14),y=n.n(O),I=n(10),b=n(8),R=n(11),_=n(2),T=n.n(_),A=n(4),L=function(){return"_"+Math.random().toString(36).substr(2,7)},j=function(e){return e.toISOString().substring(0,10)},C="http://localhost:4000",S=function(e){if(e.ok)return e;throw Error(e.statusText)},D=function(){var e=Object(A.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S,e.next=3,fetch("".concat(C,"/articles"));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1).json());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(A.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S,e.next=3,fetch("".concat(C,"/layoutParameters"));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1).json());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(A.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=S,e.next=3,fetch("".concat(C,"/rowsInLayout"));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1).json());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),F=function(e,t){return{type:"UPDATE_ARTICLE",id:e,title:t.title,content:t.content,author:t.author,tags:t.tags}},U=function(){return function(){var e=Object(A.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_ARTICLES_BEGIN"}),e.prev=1,e.next=4,D();case 4:n=e.sent,t({type:"FETCH_ARTICLES_SUCCESS",payload:{articles:n}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"FETCH_ARTICLES_FAILURE",payload:{error:e.t0}});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},M=function(e){return{type:"ADD_ARTICLE_TO_LAYOUT",id:e.id,col:e.col,row:e.row}},k=function(e,t){return{type:"REMOVE_ARTICLE_FROM_LAYOUT",id:e,rowId:t}},W=function(e,t,n){return{type:"UPDATE_LAYOUT",id:e,col:t,row:n}},P=function(){return function(){var e=Object(A.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_LAYOUT_BEGIN"}),e.prev=1,e.next=4,x();case 4:n=e.sent,t({type:"FETCH_LAYOUT_SUCCESS",payload:{layoutParameters:n}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"FETCH_LAYOUT_FAILURE",payload:{error:e.t0}});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},H=function(){return function(){var e=Object(A.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_ROWS_BEGIN"}),e.prev=1,e.next=4,N();case 4:n=e.sent,t({type:"FETCH_ROWS_SUCCESS",payload:{rowsInLayout:n}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"FETCH_ROWS_FAILURE",payload:{error:e.t0}});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},Y=function(e){return{type:"DELETE_ROW_FROM_LAYOUT",id:e}},z=n(250),B=function(){function e(t){var n=this;Object(h.a)(this,e),this.post=function(){var e=Object(A.a)(T.a.mark(function e(t){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.createFromJson(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(A.a)(T.a.mark(function e(t){var r,a,c,o,i,u;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.title,c=t.content,o=t.author,i=t.tags,u=j(new Date),e.next=4,n.createFromJson({id:r,title:a,content:c,date:u,author:o,tags:i});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.createInLayout=function(){var e=Object(A.a)(T.a.mark(function e(t){var r,a,c;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.col,c=t.row,e.next=3,n.createFromJson({id:r,col:a,row:c});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.createRow=function(){var e=Object(A.a)(T.a.mark(function e(t){var r,a;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.articlesInRow,e.next=3,n.createFromJson({id:r,articlesInRow:a});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),this.url=t}return Object(E.a)(e,[{key:"normalize",value:function(t){return t.forEach(function(t){return e.normalizeSingle(t)}),t}},{key:"get",value:function(){var e=Object(A.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get(t);case 2:return n=e.sent,e.abrupt("return",this.normalize(n));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createFromJson",value:function(){var t=Object(A.a)(T.a.mark(function t(n){var r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.post(this.url,n);case 2:return r=t.sent,t.abrupt("return",e.normalizeSingle(r));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(A.a)(T.a.mark(function t(n,r){var a,c,o,i,u,s,l;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.title,c=r.content,o=r.author,i=r.tags,u=r.date,s=void 0===u?j(new Date):u,t.next=3,z.put(this.url+"/"+n,{title:a,content:c,date:s,author:o,tags:i});case 3:return l=t.sent,t.abrupt("return",e.normalizeSingle(l));case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateInLayout",value:function(){var t=Object(A.a)(T.a.mark(function t(n,r){var a,c,o;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.col,c=r.row,t.next=3,z.put(this.url+"/"+n,{col:a,row:c});case 3:return o=t.sent,t.abrupt("return",e.normalizeSingle(o));case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"updateRow",value:function(){var t=Object(A.a)(T.a.mark(function t(n,r){var a;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.put(this.url+"/"+n,{id:n,articlesInRow:r});case 2:return a=t.sent,t.abrupt("return",e.normalizeSingle(a));case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"delete",value:function(){var t=Object(A.a)(T.a.mark(function t(n){var r;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z.del(this.url+"/"+n);case 2:return r=t.sent,t.abrupt("return",e.normalizeSingle(r));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}],[{key:"normalizeSingle",value:function(e){return e.date=new Date(e.date),e}}]),e}(),V=new B("http://localhost:4000/articles"),X=function(e,t){switch(t.type){case"FETCH_ARTICLES_SUCCESS":return t.payload.articles;case"ADD_ARTICLE":return V.create(t),{id:t.id,title:t.title,content:t.content,date:t.date,author:t.author,tags:t.tags};case"REMOVE_ARTICLE":return void V.delete(t.id);case"UPDATE_ARTICLE":return V.update(t.id,{title:t.title,content:t.content,author:t.author,tags:t.tags}),{id:t.id,title:t.title,content:t.content,date:j(new Date),author:t.author,tags:t.tags};default:return e}},J=Object(I.combineReducers)({byId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"FETCH_ARTICLES_BEGIN":return e;case"FETCH_ARTICLES_SUCCESS":return X(e.articles,t).reverse().reduce(function(e,t){return e[t.id]=t,e},{});case"FETCH_ARTICLES_FAILURE":return e;case"ADD_ARTICLE":return Object(m.a)({},e,Object(R.a)({},t.id,X(e[t.id],t)));case"REMOVE_ARTICLE":var n=Object.assign({},e);return delete n[t.id],X(e[t.id],t),n;case"UPDATE_ARTICLE":return Object.assign({},e,Object(R.a)({},t.id,X(e[t.id],t)));default:return e}},allIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ARTICLES_BEGIN":return e;case"FETCH_ARTICLES_SUCCESS":return Object(b.a)(X(e.articles,t).map(function(e){return e.id}));case"FETCH_ARTICLES_FAILURE":return e;case"ADD_ARTICLE":return[].concat(Object(b.a)(e),[t.id]);case"REMOVE_ARTICLE":return e.filter(function(e){return e!==t.id});case"UPDATE_ARTICLE":var n=e;return n.forEach(function(e){e===t.id&&(n[n.indexOf(e)]=t.id)}),n;default:return e}},isFetching:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"FETCH_ARTICLES_BEGIN":return!0;case"FETCH_ARTICLES_SUCCESS":case"FETCH_ARTICLES_FAILURE":return!1;default:return e}},allErrors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ARTICLES_BEGIN":case"FETCH_ARTICLES_SUCCESS":return null;case"FETCH_ARTICLES_FAILURE":return t.payload.error;default:return e}}}),G=function(e){return e.allIds.map(function(t){return e.byId[t]})},K=new B("http://localhost:4000/layoutParameters"),$=function(e,t){switch(t.type){case"FETCH_LAYOUT_SUCCESS":return t.payload.layoutParameters;case"ADD_ARTICLE_TO_LAYOUT":return K.createInLayout(t),{id:t.id,row:t.row,col:t.col};case"REMOVE_ARTICLE_FROM_LAYOUT":return void K.delete(t.id);case"UPDATE_LAYOUT":return K.updateInLayout(t.id,{row:t.row,col:t.col}),{id:t.id,row:t.row,col:t.col};default:return e}},q=n(69),Q=n.n(q),Z=new B("http://localhost:4000/rowsInLayout"),ee=Object(I.combineReducers)({rowsByIds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ROWS_BEGIN":return e;case"FETCH_ROWS_SUCCESS":return t.payload.rowsInLayout.reverse().reduce(function(e,t){return e[t.id]=t,e},{});case"FETCH_ROWS_FAILURE":return e;case"ADD_ARTICLE_TO_LAYOUT":return Z.updateRow(t.row,[].concat(Object(b.a)(e[t.row].articlesInRow),[t.id])),Object(m.a)({},e,Object(R.a)({},t.row,{id:t.row,articlesInRow:[].concat(Object(b.a)(e[t.row].articlesInRow),[t.id])}));case"ADD_NEW_ROW_TO_LAYOUT":return Z.createRow({id:t.id,articlesInRow:[]}),Object(m.a)({},e,Object(R.a)({},t.id,{id:t.id,articlesInRow:[]}));case"DELETE_ROW_FROM_LAYOUT":Z.delete(t.id);var n=Object.assign({},e);return delete n[t.id],n;case"REMOVE_ARTICLE_FROM_LAYOUT":return Z.updateRow(t.rowId,e[t.rowId].articlesInRow.filter(function(e){return e!==t.id})),Object(m.a)({},e,Object(R.a)({},t.rowId,Object(m.a)({},e[t.rowId],{articlesInRow:e[t.rowId].articlesInRow.filter(function(e){return e!==t.id})})));case"REORDER_ARTICLE_IN_ROW":return Z.updateRow(t.id,Q()(e[t.id].articlesInRow,{$splice:[[t.index,1],[t.overIndex,0,t.draggedId]]})),Object(m.a)({},e,Object(R.a)({},t.id,Object(m.a)({},e[t.id],{articlesInRow:Q()(e[t.id].articlesInRow,{$splice:[[t.index,1],[t.overIndex,0,t.draggedId]]})})));case"REMOVE_ARTICLE_FROM_ROW":return Z.updateRow(t.id,e[t.id].articlesInRow.filter(function(e){return e!==t.articleId})),Object(m.a)({},e,Object(R.a)({},t.id,Object(m.a)({},e[t.id],{articlesInRow:e[t.id].articlesInRow.filter(function(e){return e!==t.articleId})})));case"UPDATE_LAYOUT":return Z.updateRow(t.row,-1===e[t.row].articlesInRow.indexOf(t.id)?[].concat(Object(b.a)(e[t.row].articlesInRow),[t.id]):e[t.row].articlesInRow),Object(m.a)({},e,Object(R.a)({},t.row,Object(m.a)({},e[t.row],{articlesInRow:-1===e[t.row].articlesInRow.indexOf(t.id)?[].concat(Object(b.a)(e[t.row].articlesInRow),[t.id]):e[t.row].articlesInRow})));default:return e}},rowsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ROWS_BEGIN":return e;case"FETCH_ROWS_SUCCESS":return Object(b.a)(t.payload.rowsInLayout.map(function(e){return e.id}));case"FETCH_ROWS_FAILURE":return e;case"ADD_NEW_ROW_TO_LAYOUT":return[].concat(Object(b.a)(e),[t.id]);case"DELETE_ROW_FROM_LAYOUT":return e.filter(function(e){return e!==t.id});default:return e}}}),te=Object(I.combineReducers)({byIdsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LAYOUT_BEGIN":return e;case"FETCH_LAYOUT_SUCCESS":return $(e.layout,t).reverse().reduce(function(e,t){return e[t.id]=t,e},{});case"FETCH_LAYOUT_FAILURE":return e;case"ADD_ARTICLE_TO_LAYOUT":return Object(m.a)({},e,Object(R.a)({},t.id,$(e[t.id],t)));case"REMOVE_ARTICLE_FROM_LAYOUT":var n=Object.assign({},e);return delete n[t.id],$(e[t.id],t),n;case"UPDATE_LAYOUT":return Object.assign({},e,Object(R.a)({},t.id,$(e[t.id],t)));default:return e}},allIdsInLayout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LAYOUT_BEGIN":return e;case"FETCH_LAYOUT_SUCCESS":return Object(b.a)($(e.layout,t).map(function(e){return e.id}));case"FETCH_LAYOUT_FAILURE":return e;case"ADD_ARTICLE_TO_LAYOUT":return[].concat(Object(b.a)(e),[t.id]);case"REMOVE_ARTICLE_FROM_LAYOUT":return e.filter(function(e){return e!==t.id});default:return e}},rows:ee}),ne=function(e){return e.allIdsInLayout},re=Object(I.combineReducers)({articles:J,layout:te}),ae=function(e){return G(e.articles)},ce=function(e){return function(e){return e.isFetching}(e.articles)},oe=function(e){return function(e){return e.allErrors}(e.articles)},ie=function(e,t){return function(e,t){return t.byId[e]}(e,t.articles)},ue=function(e){return G(e.articles).filter(function(t){return-1!==ne(e.layout).indexOf(t.id)})},se=function(e){return ne(e.layout)},le=function(e){return function(e){return e.allIdsInLayout.map(function(t){return e.byIdsInLayout[t]})}(e.layout)},de=function(e){return function(e){return e.rows.rowsInLayout.map(function(t){return e.rows.rowsByIds[t]})}(e.layout)},fe=n(70),pe=function(e,t){return e.split(" ").slice(0,t).join(" ")},me=(n(251),"__"),he="_";var Ee=function(e){return function(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"===typeof t?n=t:a=t||{},r=Array.isArray(a)?a:Object.keys(a).filter(function(e){return a[e]})||[],function(e){var t=e.b,n=e.e,r=e.m,a=n?[t,n].join(me):t;return[a].concat(Object(b.a)(r.map(function(e){return[a,e].join(he)}))).join(" ").trim()}({b:e,e:n,m:r})}},we=Ee("Article"),ge=y()(Object(d.DragSource)("Article",{beginDrag:function(e){return e.article}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}))(function(e){var t=e.isDragging,n=e.connectDragSource,r=e.article,c=e.itemDeleter;return n(a.a.createElement("li",{className:we(),style:{opacity:t?0:1}},a.a.createElement("h4",{className:we("title")},r.title),a.a.createElement("div",{className:we("modifiers")},a.a.createElement("button",{className:we("remove"),onClick:function(){return c(r.id)}},"Remove"),a.a.createElement(fe.a,{to:{pathname:"/edit-article/".concat(r.id)},className:we("edit")},"Edit")),a.a.createElement("p",{className:we("content")},pe(r.content,50)),a.a.createElement("small",{className:we("author")},r.author),a.a.createElement("time",{className:we("date")},r.date)))}),ve=function(e,t){return localStorage.setItem(t,JSON.stringify(e))},Oe=(n(252),Ee("Sidebar")),ye=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(w.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={dragging:!1,style:localStorage.getItem("sidebarStyles")?JSON.parse(localStorage.getItem("sidebarStyles")):{minWidth:"300px",maxWidth:"300px"},initX:null,initialMaxWidth:300},n.updateSize=function(e){ve({minWidth:e,maxWidth:e},"sidebarStyles"),n.setState(Object.assign({},n.state,{style:JSON.parse(localStorage.getItem("sidebarStyles"))}))},n.handleMouseDown=function(e){e.preventDefault(),n.state.dragging||n.setState({dragging:!0}),window.addEventListener("mouseup",n.handleMouseUp),window.addEventListener("mousemove",n.handleMouseMove)},n.handleMouseUp=function(){n.state.dragging&&n.setState({dragging:!1,initX:null}),window.removeEventListener("mousemove",n.handleMouseMove),window.removeEventListener("mouseup",n.handleMouseUp)},n.handleMouseMove=function(e){if(e.preventDefault(),n.state.initX){var t=e.pageX-n.state.initX,r="".concat(n.state.initialMaxWidth+t,"px");n.state.initialMaxWidth+t<500&&n.state.initialMaxWidth+t>200&&n.updateSize(r)}else{var a=parseInt(n.state.style.maxWidth.replace("px",""));n.setState(function(t){return Object(m.a)({},t,{initX:e.pageX,initialMaxWidth:a})})}},n}return Object(v.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchArticles(),this.props.fetchLayout(),this.props.fetchRows()}},{key:"render",value:function(){var e=this,t=this.props,n=t.connectDropTarget,r=t.hovered,c=t.error,o=t.loading,i=t.articles,u=t.removeArticle,s=this.state.dragging;return c?a.a.createElement("div",null,"Error! ",c.message):o?a.a.createElement("div",null,"Loading..."):n(a.a.createElement("aside",{className:Oe(),style:{background:r?"#81ecec":"#ecf0f1",minWidth:this.state.style.minWidth,maxWidth:this.state.style.maxWidth}},a.a.createElement("ul",{className:Oe("blog-list")},i.map(function(e){return a.a.createElement(ge,{article:e,key:e.id,itemDeleter:u})})),s?a.a.createElement("div",{className:Oe("resize-bar",["active"]),onMouseDown:function(t){return e.handleMouseDown(t)}},"control-size"):a.a.createElement("div",{className:Oe("resize-bar"),onMouseDown:function(t){return e.handleMouseDown(t)}},"control-size")))}}]),t}(r.Component),Ie=y()(Object(d.DropTarget)("Article",{drop:function(e,t){0===e.articles.filter(function(e){return e.id===t.getItem().id}).length&&(e.removeArticleFromLayout(t.getItem().id,t.getItem().row),e.layoutParameters.filter(function(e){return e.row===t.getItem().row&&e.id!==t.getItem().id}).map(function(t){return e.updateLayout(t.id,"".concat(12/(e.layoutParameters.length-1)),t.row)}),1===e.layoutRows.filter(function(e){return e.id===t.getItem().row})[0].articlesInRow.length&&e.deleteRowFromLayout(t.getItem().row))}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver()}}),Object(u.b)(function(e){return{articles:ae(e).filter(function(t){return-1===se(e).indexOf(t.id)}),loading:ce(e),error:oe(e),layoutRows:de(e),layoutParameters:le(e)}},{fetchArticles:U,removeArticle:function(e){return{type:"REMOVE_ARTICLE",id:e}},updateArticle:F,removeArticleFromLayout:k,deleteRowFromLayout:Y,updateLayout:W,fetchRows:H,fetchLayout:P}))(ye),be=n(23),Re=(n(22),n(253),Ee("LayoutArticle")),_e=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=Object(w.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(a)))).state={dragging:!1,initX:null,initialMaxWidth:null,size:null},n.setArticlesCells=function(e,t){var r=n.props,a=r.allArticlesInRow,c=r.updateLayout,o=r.rowId,i=r.parameters;a.length<3?t!==i.id?c(t,"".concat(12-e),o):c(t,"".concat(e),o):3===a.length?t!==i.id?c(t,"".concat(Math.round((12-e)/2)),o):c(t,"".concat(e),o):a.length>3&&(t!==i.id?c(t,"".concat(Math.round((12-e)/3)),o):c(t,"".concat(e),o))},n.handleMouseDown=function(e){e.preventDefault(),n.state.dragging||n.setState(function(e){return Object(m.a)({},e,{dragging:!0,initialMaxWidth:n.props.containerWidth/12*parseInt(n.props.parameters.col),size:n.props.containerWidth/12*parseInt(n.props.parameters.col)})}),window.addEventListener("mouseup",n.handleMouseUp),window.addEventListener("mousemove",n.handleMouseMove)},n.handleMouseUp=function(){n.state.dragging&&n.setState(function(e){return Object(m.a)({},e,{initX:null,dragging:!1})}),window.removeEventListener("mousemove",n.handleMouseMove),window.removeEventListener("mouseup",n.handleMouseUp),n.props.allArticlesInRow.map(function(e){return n.setArticlesCells(Math.round(n.state.size/(n.props.containerWidth/12)),e)})},n.handleMouseMove=function(e){if(e.preventDefault(),n.state.initX){var t=e.pageX-n.state.initX,r=n.state.initialMaxWidth+t;n.setState(function(e){return Object(m.a)({},e,{size:r})})}else n.setState(function(t){return Object(m.a)({},t,{initX:e.pageX,initialMaxWidth:n.state.size})})},n}return Object(v.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this,t=this.state.size,n=this.props,r=n.parameters,c=n.article,o=n.connectDropTarget,i=n.connectDragSource,u=n.removeArticleFromLayout,s=n.resize,l=n.allArticlesInRow,d=n.deleteRowFromLayout,f=n.rowId,p=n.updateLayout;return o(i(a.a.createElement("div",{className:"grid__cell_".concat(r.col," ").concat(Re()),style:this.state.dragging?{minWidth:"".concat(t,"px"),maxWidth:"".concat(t,"px")}:{}},a.a.createElement("div",{className:Re("content-container")},a.a.createElement("h2",{className:Re("title")},c.title),a.a.createElement("button",{className:Re("remove"),onClick:function(){u(c.id,r.row),1===l.length&&d(f),l.filter(function(e){return e!==c.id}).map(function(e){return p(e,"".concat(12/(r.length-1)),f)})}},"Remove"),a.a.createElement("p",{className:Re("content")},pe(c.content,50)),a.a.createElement("small",{className:Re("author")},c.author),a.a.createElement("time",{className:Re("date")},c.date)),s?a.a.createElement("div",{className:Re("resize"),onMouseDown:function(t){return e.handleMouseDown(t)}}):null)))}}]),t}(r.Component),Te=y()(Object(d.DragSource)("Article",{beginDrag:function(e){return{id:e.article.id,index:e.index,col:e.parameters.col,row:e.parameters.row}},endDrag:function(e){return e.parameters.id}},function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview(),isDragging:t.isDragging()}}),Object(d.DropTarget)("Article",{canDrop:function(){return!1},hover:function(e,t){var n=t.getItem().row,r=t.getItem().id,a=t.getItem().index,c=e.parameters.row,o=e.article.id,i=e.index;a!==i&&r!==o&&n===c&&(void 0!==a&&void 0!==i&&e.reorderArticleInRow(e.rowId,a,i,r,o),t.getItem().index=i)}},function(e){return{connectDropTarget:e.dropTarget()}}),Object(u.b)(null,{reorderArticleInRow:function(e,t,n,r,a){return{type:"REORDER_ARTICLE_IN_ROW",id:e,index:t,overIndex:n,draggedId:r,overId:a}},updateLayout:W,removeArticleFromLayout:k,deleteRowFromLayout:Y}))(_e),Ae=(n(254),Ee("Row")),Le=y()(Object(d.DropTarget)("Article",{canDrop:function(e){return e.articlesInRow.length<4},drop:function(e,t){if(-1===e.articlesIdsInRow.indexOf(t.getItem().id))if(t.getItem().row){e.removeArticleFromRow(t.getItem().row,t.getItem().id),1===e.allRows.filter(function(e){return t.getItem().row===e.id})[0].articlesInRow.length&&e.deleteRowFromLayout(t.getItem().row);var n=e.allParameters.filter(function(e){return e.row===t.getItem().row&&e.id!==t.getItem().id});n.map(function(t){return e.updateLayout(t.id,"".concat(12/(n.length-1)),t.row)}),e.updateLayout(t.getItem().id,t.getItem().col,e.row)}else 0!==e.parameters.length?(e.parameters.map(function(t){return e.updateLayout(t.id,"".concat(12/(e.parameters.length+1)),e.row)}),e.addArticleToLayout({id:t.getItem().id,col:"".concat(12/(e.parameters.length+1)),row:e.row})):e.addArticleToLayout({id:t.getItem().id,col:"12",row:e.row})}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),item:t.getItem(),canDrop:t.canDrop()}}),Object(u.b)(null,{addArticleToLayout:M,removeArticleFromLayout:k,updateLayout:W,removeArticleFromRow:function(e,t){return{type:"REMOVE_ARTICLE_FROM_ROW",id:e,articleId:t}},deleteRowFromLayout:Y}))(function(e){var t,n=e.row,c=e.articlesInRow,o=e.parameters,i=e.connectDropTarget,u=e.articlesIdsInRow,s=e.hovered,l=e.canDrop,d=Object(r.useState)(null),f=Object(be.a)(d,2),p=f[0],m=f[1];Object(r.useEffect)(function(){m(t.offsetWidth)});return i(a.a.createElement("section",{className:"grid grid_no-transition ".concat(Ae()),ref:function(e){return t=e},style:{backgroundColor:l&&s?"#81ecec":!l&&s?"#ff7675":"none"}},c.map(function(e,t){return c[c.length-1]===e?a.a.createElement(Te,{key:e.id,index:t,rowId:n,containerWidth:p,article:e,allArticlesInRow:u,parameters:o.filter(function(t){return t.id===e.id})[0],resize:!1}):a.a.createElement(Te,{key:e.id,index:t,rowId:n,containerWidth:p,article:e,allArticlesInRow:u,parameters:o.filter(function(t){return t.id===e.id})[0],resize:!0})})))}),je=(n(255),n(265)),Ce=Ee("Toolbar"),Se=function(e){e.canUndo,e.canRedo,e.onUndo,e.onRedo;return a.a.createElement("nav",{className:Ce()},a.a.createElement("button",{className:Ce("button",["undo"])},"Undo"),a.a.createElement("button",{className:Ce("button",["redo"])},"Redo"),a.a.createElement("button",{className:Ce("button",["save"])},"Save"),a.a.createElement(je.a,{className:Ce("button",["preview"]),to:"/layout"},"Preview"))},De=(n(257),Ee("Layout")),xe=y()(Object(d.DropTarget)("Article",{drop:function(e,t){0===e.layoutParameters.filter(function(e){return e.id===t.getItem().id}).length&&e.addArticleToLayout({id:t.getItem().id,col:"12",row:e.addNewRowToLayout().id})},canDrop:function(e,t){return 0===e.articlesInLayout.filter(function(e){return e.id===t.getItem().id}).length}},function(e,t){return{connectDropTarget:e.dropTarget(),hovered:t.isOver(),canDrop:t.canDrop()}}),Object(u.b)(function(e){return{articlesInLayout:ue(e),layoutParameters:le(e),rows:de(e)}},{fetchArticles:U,fetchLayout:P,fetchRows:H,addArticleToLayout:M,removeArticleFromLayout:k,addNewRowToLayout:function(){return{type:"ADD_NEW_ROW_TO_LAYOUT",id:L()}}}))(function(e){var t=e.connectDropTarget,n=e.articlesInLayout,c=e.fetchLayout,o=e.fetchArticles,i=e.fetchRows,u=e.layoutParameters,s=e.rows,l=e.hovered;return Object(r.useEffect)(function(){o(),c(),i()},[]),t(a.a.createElement("div",{className:De(),style:{backgroundColor:l?"#ecf0f1":"#ffffff"}},s.map(function(e){return a.a.createElement(Le,{key:e.id,row:e.id,parameters:u.filter(function(t){return t.row===e.id}),allRows:s,allParameters:u,articlesInRow:e.articlesInRow.map(function(e){return n.filter(function(t){return t.id===e})[0]}),articlesIdsInRow:e.articlesInRow})}),a.a.createElement(Se,null)))}),Ne=(n(258),Ee("MainPage")),Fe=Object(d.DragDropContext)(p.a)(function(){return a.a.createElement("main",{className:Ne()},a.a.createElement(Ie,null),a.a.createElement(xe,null))}),Ue=(n(259),Ee("PostContainer")),Me=function(e){var t=e.articlesInRow,n=e.parametersOfRowArticles;return a.a.createElement("div",{className:"grid grid_no-transition"},t.map(function(e){return a.a.createElement(fe.a,{to:{pathname:"/view_post",state:{data:e}},className:"grid__cell_".concat(n.filter(function(t){return t.id===e.id})[0].col," ").concat(Ue())},a.a.createElement("h2",{className:Ue("title")},e.title),a.a.createElement("p",{className:Ue("content")},pe(e.content,100)),a.a.createElement("small",{className:Ue("author")},e.author),a.a.createElement("time",{className:Ue("date")},e.date))}))},ke=Object(u.b)(function(e){return{articlesInLayout:ae(e).filter(function(t){return-1!==se(e).indexOf(t.id)}),layoutParameters:le(e),rows:de(e)}},{fetchLayout:P,fetchArticles:U,fetchRows:H})(function(e){var t=e.articlesInLayout,n=e.layoutParameters,c=e.fetchLayout,o=e.fetchArticles,i=e.fetchRows,u=e.rows;return Object(r.useEffect)(function(){o()},[]),Object(r.useEffect)(function(){c()},[]),Object(r.useEffect)(function(){i()},[]),u.map(function(e){return a.a.createElement(Me,{key:e.id,articleIdsInRow:e.articlesInRow,articlesInRow:t.filter(function(t){return-1!==e.articlesInRow.indexOf(t.id)}),parametersOfRowArticles:n.filter(function(t){return e.articlesInRow.indexOf(-1!==t.id)})})})}),We=n(16),Pe=function(e){var t=Object(r.useState)(e),n=Object(be.a)(t,2),a=n[0],c=n[1];return{value:a,onChange:function(e){return c(e.target.value)}}},He=(n(260),Ee("Tags")),Ye=function(e){var t=e.className,n=e.handleDelete,r=e.handleInputChange,c=e.handleInputKeyDown,o=e.input,i=e.tags;return i?a.a.createElement("label",{className:t},a.a.createElement("ul",{className:He("container")},i.map(function(e,t){return a.a.createElement("li",{key:t,className:He("item")},e,a.a.createElement("span",{className:He("item_delete"),onClick:n.bind(void 0,t)},a.a.createElement("img",{src:"https://res.cloudinary.com/dum2a6djw/image/upload/c_scale,w_12/v1552900349/delete.png",alt:"delete tag"})))}),a.a.createElement("input",{className:He("input"),placeholder:"#add tags",value:o,onChange:r,onKeyDown:c}))):a.a.createElement("p",null)},ze=n(104),Be=n.n(ze),Ve=function(e){var t=Object(r.useRef)(null);return Object(r.useEffect)(function(){Be()(t.current)}),a.a.createElement("textarea",Object.assign({ref:t},e))},Xe=(n(261),Ee("WriteBlog")),Je=Object(We.b)(Object(u.b)(function(e,t){var n=t.match.params.id;return{article:ie(n,e),isLoading:ce(e),isError:oe(e)}},{fetchArticles:U,addNewToArticles:function(e){return{type:"ADD_ARTICLE",id:L(),title:e.title,content:e.content,date:j(new Date),author:e.author,tags:e.tags}},updateExistingArticle:F}),Object(We.e)(function(e){var t=e.match,n=e.article,r=e.isLoading,a=e.isError,c=e.fetchArticles;return t.params.id?n||r||a?void 0:c():{article:{title:"",content:"",author:"",tags:[]}}}),Object(We.a)(function(e){return e.isLoading},Object(We.d)(function(){return"Loading..."})),Object(We.a)(function(e){return e.isError},Object(We.d)(function(){return"Some error happened..."})),Object(We.c)("article"),Object(We.e)(function(e){var t=e.history,n=e.match,r=e.addNewToArticles,a=e.updateExistingArticle,c=n.params.id,o=c?a.bind(null,c):r;return{publishArticle:function(e){o(e),t.push("/")}}}))(function(e){var t=Pe(e.title),n=Pe(e.content),c=Pe(e.author),o=Object(r.useState)(e.tags),i=Object(be.a)(o,2),u=i[0],s=i[1],l=Object(r.useState)(""),d=Object(be.a)(l,2),f=d[0],p=d[1];return a.a.createElement("form",{className:"WriteBlog",onSubmit:function(r){r.preventDefault();var a={title:t.value,content:n.value,author:c.value,tags:u};e.publishArticle(a)}},a.a.createElement("input",Object.assign({className:Xe("title"),placeholder:"Title",name:"title"},t)),a.a.createElement("input",Object.assign({className:Xe("author"),placeholder:"Author",name:"author"},c)),a.a.createElement(Ye,{className:Xe("tags"),tags:u,input:f,handleDelete:function(e){s(u.filter(function(t,n){return n!==e}))},handleInputKeyDown:function(e){if(32===e.keyCode){var t=e.target.value;s([].concat(Object(b.a)(u),[t])),p("")}u.length&&8===e.keyCode&&!f.length&&s(u.slice(0,u.length-1))},handleInputChange:function(e){return p(e.target.value)}}),a.a.createElement(Ve,Object.assign({className:Xe("content"),name:"content",placeholder:"Tell us your story..."},n)),a.a.createElement("button",{className:Xe("publish-button"),type:"submit"},"Ready To Publish?"))}),Ge=(n(262),function(e){var t=e.location.state.data;return a.a.createElement("div",{className:"ViewPost"},a.a.createElement("h1",{className:"ViewPost__title"},t.title),a.a.createElement("h3",{className:"ViewPost__author"},t.author),a.a.createElement("p",{className:"ViewPost__content"},t.content),a.a.createElement("ul",{className:"ViewPost__tags"},t.tags.map(function(e){return a.a.createElement("li",{className:"ViewPost__tags_tag",key:e.id},e.text)})))}),Ke=function(){return a.a.createElement("main",{className:"grid__cell_12"},a.a.createElement(l.a,{exact:!0,path:"/",component:Fe}),a.a.createElement(l.a,{path:"/layout",component:ke}),a.a.createElement(l.a,{exact:!0,path:"/edit-article",component:Je}),a.a.createElement(l.a,{exact:!0,path:"/edit-article/:id",component:Je}),a.a.createElement(l.a,{path:"/view_post",component:Ge}))},$e=(n(263),Ee("Header")),qe=function(){return a.a.createElement(fe.a,{to:"/edit-article",className:$e("write-blog")},a.a.createElement("span",{className:$e("write-blog_centered")},"Write New Blog!"))},Qe=function(){return a.a.createElement("div",{className:$e()},a.a.createElement("header",{className:$e("header")},a.a.createElement(je.a,{className:$e("left"),to:"/",children:"Home"},a.a.createElement("h1",{className:$e("logo-main")},"Drag'n'Blog"),a.a.createElement("p",{className:$e("logo-secondary")},"flexible-blog")),a.a.createElement("div",{className:$e("right")},a.a.createElement("form",{action:"",className:$e("search")},a.a.createElement("input",{className:$e("input"),placeholder:"Search"})),a.a.createElement(l.a,{exact:!0,path:"/",component:qe}),a.a.createElement(l.a,{exact:!0,path:"/layout",component:qe}),a.a.createElement(fe.a,{to:"/",className:$e("user"),children:"User"}))))},Ze=function(){return a.a.createElement("div",{className:"grid"},a.a.createElement("header",{className:"grid__cell_12"},a.a.createElement(Qe,null)),a.a.createElement(Ke,null))},et=n(105),tt=n(106);o.a.render(a.a.createElement(s,{store:Object(I.createStore)(re,Object(et.composeWithDevTools)(Object(I.applyMiddleware)(tt.a)))},a.a.createElement(Ze,null)),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.ca923a03.chunk.js.map