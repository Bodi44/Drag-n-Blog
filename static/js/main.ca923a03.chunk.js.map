{"version":3,"sources":["Database/fetcher.js","components/Provider.js","helpers/generateUniqueId.js","helpers/dateToString.js","api/index.js","actions/index.js","Database/index.js","reducers/articles/article.js","reducers/articles/index.js","reducers/layout/parameter.js","reducers/layout/rows.js","reducers/layout/index.js","reducers/index.js","helpers/shortenContent.js","helpers/BEM.js","components/Sidebar/Article/Article.js","helpers/manageLocalStorage.js","components/Sidebar/Sidebar.js","components/Layout/LayoutArticle/LayoutArticle.js","components/Layout/Row/Row.js","components/Toolbar/Toolbar.js","components/Layout/Layout.js","components/MainPage/MainPage.js","components/Posts/PostsContainer/PostContainer.js","components/Posts/Posts.js","helpers/hooks.js","components/Tags/Tags.js","components/Textarea/Textarea.js","components/WriteBlog/WriteBlog.js","components/ViewPost/ViewPost.js","components/Routes.js","components/Header/Header.js","components/App.js","index.js","configureStore.js"],"names":["get","_ref","Object","D_UCU_IndustrialWeb_WebCourseProject_drag_n_blog_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","D_UCU_IndustrialWeb_WebCourseProject_drag_n_blog_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","url","wrap","_context","prev","next","fetch","sent","json","abrupt","stop","this","_x","apply","arguments","post","_ref2","_callee2","data","_context2","headers","content-type","body","JSON","stringify","method","_x2","_x3","put","_ref3","_callee3","_context3","_x4","_x5","del","_ref4","_callee4","_context4","_x6","_x7","ProviderWrapper","children","store","react_default","createElement","es","BrowserRouter","generateUniqueId","Math","random","toString","substr","dateToString","date","toISOString","substring","API","handleErrors","response","ok","Error","statusText","getAllArticles","asyncToGenerator","regenerator_default","t0","concat","t1","getLayout","getRows","updateArticle","id","type","title","content","author","tags","fetchArticles","dispatch","payload","articles","error","addArticleToLayout","col","row","removeArticleFromLayout","rowId","updateLayout","fetchLayout","layoutParameters","fetchRows","_ref5","rowsInLayout","deleteRowFromLayout","fetcher","require","Database","_this","classCallCheck","createFromJson","create","article","Date","createInLayout","createRow","articlesInRow","forEach","el","normalizeSingle","resp","normalize","database","state","action","delete","update","combineReducers","byId","length","undefined","reverse","reduce","obj","item","objectSpread","defineProperty","newState","assign","allIds","toConsumableArray","map","filter","indexOf","isFetching","allErrors","parameter","updateInLayout","rows","rowsByIds","updateRow","articleId","$splice","index","overIndex","draggedId","layout","byIdsInLayout","param","newLayout","allIdsInLayout","getIdsInLayout","fromArticles","isAllArticlesLoading","isAllArticlesLoadingError","getArticlesById","searchableId","getAllArticlesInLayout","fromLayout","getLayoutParameters","getAllRows","shortenContent","str","numOfWords","split","slice","join","ELEMENT_SEPARATOR","MODIFIER_SEPARATOR","b","elementName","e","m","modifiers","Array","isArray","keys","modifier","base","trim","getBEMPAth","BEM","flow","DragSource","beginDrag","props","connect","monitor","connectDragSource","dragSource","connectDragPreview","dragPreview","isDragging","itemDeleter","className","style","opacity","onClick","Link","to","pathname","updateLocalStorage","storageName","localStorage","setItem","Sidebar","dragging","getItem","parse","minWidth","maxWidth","initX","initialMaxWidth","updateSize","width","setState","handleMouseDown","preventDefault","window","addEventListener","handleMouseUp","handleMouseMove","removeEventListener","delta","pageX","parseInt","replace","_this2","_this$props","connectDropTarget","hovered","loading","removeArticle","message","background","Sidebar_Article_Article","key","onMouseDown","Component","DropTarget","drop","layoutRows","dropTarget","isOver","LayoutArticle","size","setArticlesCells","allArticlesInRow","parameters","round","containerWidth","_this$props2","resize","endDrag","canDrop","hover","dragRow","overRow","overId","reorderArticleInRow","articlesIdsInRow","removeArticleFromRow","allRows","paramsInRow","allParameters","container","_useState","useState","_useState2","slicedToArray","dimension","setDimension","useEffect","offsetWidth","ref","backgroundColor","i","Layout_LayoutArticle_LayoutArticle","Toolbar","canUndo","canRedo","onUndo","onRedo","NavLink","addNewRowToLayout","articlesInLayout","Layout_Row_Row","components_Toolbar_Toolbar","DragDropContext","HTML5Backend","components_Sidebar_Sidebar","components_Layout_Layout","PostContainer","parametersOfRowArticles","Posts_PostsContainer_PostContainer","articleIdsInRow","useFormInput","initValue","value","setValue","onChange","ev","target","Tags","handleDelete","handleInputChange","handleInputKeyDown","input","tag","bind","src","alt","placeholder","onKeyDown","Textarea","textarea","useRef","autosize","current","enhancer","compose","match","params","isLoading","isError","addNewToArticles","updateExistingArticle","withProps","branch","renderComponent","flattenProp","history","publishAction","publishArticle","push","setTags","_useState3","_useState4","setInput","onSubmit","event","name","components_Tags_Tags","keyCode","components_Textarea_Textarea","ViewPost","location","text","Routes","Route","exact","path","component","MainPage","Posts","WriteBlog","MainButton","Header","App","components_Header_Header","components_Routes","ReactDOM","render","Provider","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","components_App","document","getElementById"],"mappings":"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","file":"static/js/main.ca923a03.chunk.js","sourcesContent":["// @flow\r\n\r\nexport const get = async( url: string )=> await (await fetch(url)).json();\r\n\r\nexport const post = async (url: string, data: Object) =>\r\n  await (await fetch(url, {\r\n    headers: { 'content-type': 'application/json; charset=UTF-8' },\r\n    body: JSON.stringify(data),\r\n    method: 'POST',\r\n  })).json();\r\n\r\nexport const put = async (url: string, data: Object) =>\r\n  await (await fetch(url, {\r\n    headers: { 'content-type': 'application/json; charset=UTF-8' },\r\n    body: JSON.stringify(data),\r\n    method: 'PUT',\r\n  })).json();\r\n\r\nexport const del = async (url: string, data: Object) =>\r\n  await (await fetch(url, {\r\n    headers: { 'content-type': 'application/json; charset=UTF-8' },\r\n    body: JSON.stringify(data),\r\n    method: 'DELETE',\r\n  })).json();","import React from 'react'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\nimport { Provider } from 'react-redux'\r\n\r\nconst ProviderWrapper = ({ children, store }) => (\r\n  <Provider store={store}>\r\n    <Router>\r\n      {children}\r\n    </Router>\r\n  </Provider>\r\n)\r\n\r\nexport default ProviderWrapper","export const generateUniqueId = () =>\r\n  '_' + Math.random().toString(36).substr(2, 7)\r\n","export default (date) =>\r\n  date.toISOString().substring(0, 10)","const API = 'http://localhost:4000'\r\n\r\nconst handleErrors = response => {\r\n  if (!response.ok) throw Error(response.statusText)\r\n  else return response\r\n}\r\n\r\nexport const getAllArticles = async () =>\r\n  handleErrors(await fetch(`${API}/articles`)).json()\r\n\r\nexport const getLayout = async () =>\r\n  handleErrors(await fetch(`${API}/layoutParameters`)).json()\r\n\r\nexport const getRows = async () =>\r\n  handleErrors(await fetch(`${API}/rowsInLayout`)).json()\r\n","// @flow\r\nimport { generateUniqueId } from '../helpers/generateUniqueId'\r\nimport dateToString from '../helpers/dateToString'\r\nimport { getAllArticles, getLayout, getRows } from '../api'\r\n//Article action-names\r\nexport const FETCH_ARTICLES_BEGIN = 'FETCH_ARTICLES_BEGIN'\r\nexport const FETCH_ARTICLES_SUCCESS = 'FETCH_ARTICLES_SUCCESS'\r\nexport const FETCH_ARTICLES_FAILURE = 'FETCH_ARTICLES_FAILURE'\r\nexport const ADD_ARTICLE = 'ADD_ARTICLE'\r\nexport const REMOVE_ARTICLE = 'REMOVE_ARTICLE'\r\nexport const UPDATE_ARTICLE = 'UPDATE_ARTICLE'\r\n//Layout action-names\r\nexport const FETCH_LAYOUT_BEGIN = 'FETCH_LAYOUT_BEGIN'\r\nexport const FETCH_LAYOUT_SUCCESS = 'FETCH_LAYOUT_SUCCESS'\r\nexport const FETCH_LAYOUT_FAILURE = 'FETCH_LAYOUT_FAILURE'\r\nexport const ADD_ARTICLE_TO_LAYOUT = 'ADD_ARTICLE_TO_LAYOUT'\r\nexport const REMOVE_ARTICLE_FROM_LAYOUT = 'REMOVE_ARTICLE_FROM_LAYOUT'\r\nexport const UPDATE_LAYOUT = 'UPDATE_LAYOUT'\r\n//Rows action-names\r\nexport const FETCH_ROWS_BEGIN = 'FETCH_ROWS_BEGIN'\r\nexport const FETCH_ROWS_SUCCESS = 'FETCH_ROWS_SUCCESS'\r\nexport const FETCH_ROWS_FAILURE = 'FETCH_ROWS_FAILURE'\r\nexport const ADD_NEW_ROW_TO_LAYOUT = 'ADD_NEW_ROW_TO_LAYOUT'\r\nexport const DELETE_ROW_FROM_LAYOUT = 'DELETE_ROW_FROM_LAYOUT'\r\nexport const REORDER_ARTICLE_IN_ROW = 'REORDER_ARTICLE_IN_ROW'\r\nexport const REMOVE_ARTICLE_FROM_ROW = 'REMOVE_ARTICLE_FROM_ROW'\r\n\r\ntype Dispatcher = (Object | Promise<Object>) => void\r\ntype Error = string | null\r\ntype Article = {\r\n  id: string,\r\n  title: string,\r\n  content: string,\r\n  date?: string,\r\n  author: string,\r\n  tags?: [Object],\r\n}\r\n\r\n//Articles actions\r\nexport const addArticle = (data: Object): { type: string, ...Article } => ({\r\n  type: ADD_ARTICLE,\r\n  id: generateUniqueId(),\r\n  title: data.title,\r\n  content: data.content,\r\n  date: dateToString(new Date()),\r\n  author: data.author,\r\n  tags: data.tags\r\n})\r\n\r\nexport const removeArticle = (id: string): { type: string, id: string } => ({\r\n  type: REMOVE_ARTICLE,\r\n  id\r\n})\r\n\r\nexport const updateArticle = (\r\n  id: string,\r\n  { title, content, author, tags }: Object\r\n): { type: string, ...Article } => ({\r\n  type: UPDATE_ARTICLE,\r\n  id,\r\n  title,\r\n  content,\r\n  author,\r\n  tags\r\n})\r\n\r\nexport const fetchArticlesBegin = (): { type: string } => ({\r\n  type: FETCH_ARTICLES_BEGIN\r\n})\r\n\r\nexport const fetchArticlesSuccess = (articles: [Article]): { type: string, payload: { articles: [Article] } } => ({\r\n  type: FETCH_ARTICLES_SUCCESS,\r\n  payload: { articles }\r\n})\r\n\r\nexport const fetchArticlesFailure = (error: Error): { type: string, payload: { error: Error } } => ({\r\n  type: FETCH_ARTICLES_FAILURE,\r\n  payload: { error }\r\n})\r\n\r\nexport const fetchArticles = () => async (dispatch: Dispatcher) => {\r\n  dispatch(fetchArticlesBegin())\r\n\r\n  try {\r\n    const data = await getAllArticles()\r\n    dispatch(fetchArticlesSuccess(data))\r\n  } catch (error) {\r\n    dispatch(fetchArticlesFailure(error))\r\n  }\r\n}\r\n\r\n//Layout actions\r\ntype Layout = {\r\n  id: string,\r\n  col: string,\r\n  row: string\r\n}\r\n\r\nexport const addArticleToLayout = ({ id, col, row }: Object): { type: string, ...Layout } => ({\r\n  type: ADD_ARTICLE_TO_LAYOUT,\r\n  id,\r\n  col,\r\n  row\r\n})\r\n\r\nexport const removeArticleFromLayout = (id: string, rowId: string): { type: string, id: string, rowId: string } => ({\r\n  type: REMOVE_ARTICLE_FROM_LAYOUT,\r\n  id,\r\n  rowId\r\n})\r\n\r\nexport const updateLayout = (id: string, col: string, row: string): { type: string, ...Layout } => ({\r\n  type: UPDATE_LAYOUT,\r\n  id,\r\n  col,\r\n  row\r\n})\r\n\r\nexport const fetchLayoutBegin = (): { type: string } => ({\r\n  type: FETCH_LAYOUT_BEGIN\r\n})\r\n\r\nexport const fetchLayoutSuccess = (\r\n  layoutParameters: [Article]\r\n): { type: string, payload: { layoutParameters: [Article] } } => ({\r\n  type: FETCH_LAYOUT_SUCCESS,\r\n  payload: { layoutParameters }\r\n})\r\n\r\nexport const fetchLayoutFailure = (error: Error): { type: string, payload: { error: Error } } => ({\r\n  type: FETCH_LAYOUT_FAILURE,\r\n  payload: { error }\r\n})\r\n\r\nexport const fetchLayout = () => async (dispatch: Dispatcher) => {\r\n  dispatch(fetchLayoutBegin())\r\n\r\n  try {\r\n    const data = await getLayout()\r\n    dispatch(fetchLayoutSuccess(data))\r\n  } catch (error) {\r\n    dispatch(fetchLayoutFailure(error))\r\n  }\r\n}\r\n\r\n//Rows actions\r\nexport const fetchRowsBegin = (): { type: string } => ({\r\n  type: FETCH_ROWS_BEGIN\r\n})\r\n\r\nexport const fetchRowsSuccess = (rowsInLayout: [Article]): { type: string, payload: { rowsInLayout: [Article] } } => ({\r\n  type: FETCH_ROWS_SUCCESS,\r\n  payload: { rowsInLayout }\r\n})\r\n\r\nexport const fetchRowsFailure = (error: Error): { type: string, payload: { error: Error } } => ({\r\n  type: FETCH_ROWS_FAILURE,\r\n  payload: { error }\r\n})\r\n\r\nexport const fetchRows = () => async (dispatch: Dispatcher) => {\r\n  dispatch(fetchRowsBegin())\r\n\r\n  try {\r\n    const data = await getRows()\r\n    dispatch(fetchRowsSuccess(data))\r\n  } catch (error) {\r\n    dispatch(fetchRowsFailure(error))\r\n  }\r\n}\r\n\r\nexport const addNewRowToLayout = (): { type: string, id: string } => ({\r\n  type: ADD_NEW_ROW_TO_LAYOUT,\r\n  id: generateUniqueId()\r\n})\r\n\r\nexport const deleteRowFromLayout = (id: string): { type: string, id: string } => ({\r\n  type: DELETE_ROW_FROM_LAYOUT,\r\n  id\r\n})\r\n\r\nexport const reorderArticleInRow = (rowId: string, index: number, overIndex: number, draggedId: string, overId: string):\r\n  { type: string, id: string, index: number, overIndex: number, draggedId: string, overId: string } =>\r\n  ({\r\n    type: REORDER_ARTICLE_IN_ROW,\r\n    id: rowId,\r\n    index: index,\r\n    overIndex: overIndex,\r\n    draggedId: draggedId,\r\n    overId: overId\r\n  })\r\n\r\nexport const removeArticleFromRow = (rowId: string, articleId: string): { type: string, id: string, articleId: string } => ({\r\n  type: REMOVE_ARTICLE_FROM_ROW,\r\n  id: rowId,\r\n  articleId: articleId\r\n})","// @flow\r\nimport dateToString from '../helpers/dateToString'\r\n\r\nconst fetcher = require('./fetcher')\r\n\r\nexport default class Database {\r\n  url: string\r\n\r\n  constructor(url: string) {\r\n    this.url = url\r\n  }\r\n\r\n  static normalizeSingle(data: Object) {\r\n    data.date = new Date(data.date)\r\n    return data\r\n  }\r\n\r\n  normalize(data: Object) {\r\n    data.forEach(el => Database.normalizeSingle(el))\r\n    return data\r\n  }\r\n\r\n  async get(url: string) {\r\n    let resp = await fetcher.get(url)\r\n    return this.normalize(resp)\r\n  }\r\n\r\n  async createFromJson(data: Object) {\r\n    let resp = await fetcher.post(this.url, data)\r\n    return Database.normalizeSingle(resp)\r\n  }\r\n\r\n  post = async (articles) => {\r\n    return await this.createFromJson(articles)\r\n  }\r\n\r\n  create = async (article: Object) => {\r\n    const { id, title, content, author, tags } = article\r\n    const date = dateToString(new Date())\r\n    return await this.createFromJson({\r\n      id,\r\n      title,\r\n      content,\r\n      date,\r\n      author,\r\n      tags\r\n    })\r\n  }\r\n\r\n  createInLayout = async (layoutParameters: Object) => {\r\n    const { id, col, row } = layoutParameters\r\n    return await this.createFromJson({\r\n      id,\r\n      col,\r\n      row\r\n    })\r\n  }\r\n\r\n  createRow = async (row) => {\r\n    const { id, articlesInRow } = row\r\n    return await this.createFromJson({\r\n      id,\r\n      articlesInRow\r\n    })\r\n  }\r\n\r\n  async update(id: string, { title, content, author, tags, date = dateToString(new Date()) }: Object) {\r\n    let resp = await fetcher.put(this.url + '/' + id, {\r\n      title,\r\n      content,\r\n      date,\r\n      author,\r\n      tags\r\n    })\r\n    return Database.normalizeSingle(resp)\r\n  }\r\n\r\n  async updateInLayout(id: string, { col, row }: Object) {\r\n    let resp = await fetcher.put(this.url + '/' + id, {\r\n      col,\r\n      row\r\n    })\r\n    return Database.normalizeSingle(resp)\r\n  }\r\n\r\n  async updateRow(id, articlesInRow) {\r\n    let resp = await fetcher.put(this.url + '/' + id, {\r\n      id,\r\n      articlesInRow\r\n    })\r\n\r\n    return Database.normalizeSingle(resp)\r\n  }\r\n\r\n  async delete(id: string) {\r\n    let resp = await fetcher.del(this.url + '/' + id)\r\n    return Database.normalizeSingle(resp)\r\n  }\r\n}\r\n","import Database from '../../Database'\r\nimport dateToString from '../../helpers/dateToString'\r\n\r\nimport {\r\n  ADD_ARTICLE,\r\n  FETCH_ARTICLES_SUCCESS,\r\n  REMOVE_ARTICLE,\r\n  UPDATE_ARTICLE\r\n} from '../../actions'\r\n\r\nconst database = new Database('http://localhost:4000/articles')\r\n\r\nconst article = (state, action) => {\r\n  switch (action.type) {\r\n    case FETCH_ARTICLES_SUCCESS:\r\n      return action.payload.articles\r\n    case ADD_ARTICLE:\r\n      database.create(action)\r\n      return {\r\n        id: action.id,\r\n        title: action.title,\r\n        content: action.content,\r\n        date: action.date,\r\n        author: action.author,\r\n        tags: action.tags\r\n      }\r\n    case REMOVE_ARTICLE:\r\n      database.delete(action.id)\r\n      return\r\n    case UPDATE_ARTICLE:\r\n      database.update(action.id, {\r\n        title: action.title,\r\n        content: action.content,\r\n        author: action.author,\r\n        tags: action.tags\r\n      })\r\n      return {\r\n        id: action.id,\r\n        title: action.title,\r\n        content: action.content,\r\n        date: dateToString(new Date()),\r\n        author: action.author,\r\n        tags: action.tags\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default article\r\n","import { combineReducers } from 'redux'\r\n\r\nimport {\r\n  ADD_ARTICLE,\r\n  FETCH_ARTICLES_BEGIN,\r\n  FETCH_ARTICLES_FAILURE,\r\n  FETCH_ARTICLES_SUCCESS,\r\n  REMOVE_ARTICLE,\r\n  UPDATE_ARTICLE\r\n} from '../../actions'\r\n\r\nimport article from './article'\r\n\r\nconst byId = (state = {}, action = {}) => {\r\n  switch (action.type) {\r\n    case FETCH_ARTICLES_BEGIN:\r\n      return state\r\n    case FETCH_ARTICLES_SUCCESS:\r\n      return article(state.articles, action).reverse().reduce((obj, item) => {\r\n        obj[item.id] = item\r\n        return obj\r\n      }, {})\r\n    case FETCH_ARTICLES_FAILURE:\r\n      return state\r\n    case ADD_ARTICLE:\r\n      return {\r\n        ...state,\r\n        [action.id]: article(state[action.id], action)\r\n      }\r\n    case REMOVE_ARTICLE:\r\n      const newState = Object.assign({}, state)\r\n      delete newState[action.id]\r\n      article(state[action.id], action)\r\n      return newState\r\n    case UPDATE_ARTICLE:\r\n      return Object.assign({}, state, {\r\n        [action.id]: article(state[action.id], action)\r\n      })\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst allIds = (state = [], action) => {\r\n  switch (action.type) {\r\n    case FETCH_ARTICLES_BEGIN:\r\n      return state\r\n    case FETCH_ARTICLES_SUCCESS:\r\n      return [...article(state.articles, action).map(article => article.id)]\r\n    case FETCH_ARTICLES_FAILURE:\r\n      return state\r\n    case ADD_ARTICLE:\r\n      return [...state, action.id]\r\n    case REMOVE_ARTICLE:\r\n      return state.filter(id => id !== action.id)\r\n    case UPDATE_ARTICLE:\r\n      const newState = state\r\n      newState.forEach(id => {\r\n        if (id === action.id) {\r\n          newState[newState.indexOf(id)] = action.id\r\n        }\r\n      })\r\n      return newState\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst isFetching = (state = false, action) => {\r\n  switch (action.type) {\r\n    case FETCH_ARTICLES_BEGIN:\r\n      return true\r\n    case FETCH_ARTICLES_SUCCESS:\r\n      return false\r\n    case FETCH_ARTICLES_FAILURE:\r\n      return false\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst allErrors = (state = null, action) => {\r\n  switch (action.type) {\r\n    case FETCH_ARTICLES_BEGIN:\r\n      return null\r\n    case FETCH_ARTICLES_SUCCESS:\r\n      return null\r\n    case FETCH_ARTICLES_FAILURE:\r\n      return action.payload.error\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\n\r\nconst articles = combineReducers({\r\n  byId,\r\n  allIds,\r\n  isFetching,\r\n  allErrors\r\n})\r\n\r\nexport default articles\r\n\r\n// Selectors\r\nexport const getAllArticles = state => state.allIds.map(id => state.byId[id])\r\nexport const isAllArticlesLoading = state => state.isFetching\r\nexport const isAllArticlesLoadingError = state => state.allErrors\r\nexport const getArticlesById = (searchableId, state) => state.byId[searchableId]\r\n","import {\r\n  ADD_ARTICLE_TO_LAYOUT,\r\n  UPDATE_LAYOUT,\r\n  FETCH_LAYOUT_SUCCESS,\r\n  REMOVE_ARTICLE_FROM_LAYOUT\r\n} from '../../actions'\r\n\r\nimport Database from '../../Database'\r\n\r\nconst database = new Database('http://localhost:4000/layoutParameters')\r\n\r\nconst parameter = (state, action) => {\r\n  switch (action.type) {\r\n    case FETCH_LAYOUT_SUCCESS:\r\n      return action.payload.layoutParameters\r\n    case ADD_ARTICLE_TO_LAYOUT:\r\n      database.createInLayout(action)\r\n      return {\r\n        id: action.id,\r\n        row: action.row,\r\n        col: action.col\r\n      }\r\n    case REMOVE_ARTICLE_FROM_LAYOUT:\r\n      database.delete(action.id)\r\n      return\r\n    case UPDATE_LAYOUT:\r\n      database.updateInLayout(action.id, { row: action.row, col: action.col })\r\n      return {\r\n        id: action.id,\r\n        row: action.row,\r\n        col: action.col\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default parameter","import { combineReducers } from 'redux'\r\nimport update from 'immutability-helper'\r\n\r\nimport {\r\n  ADD_ARTICLE_TO_LAYOUT,\r\n  ADD_NEW_ROW_TO_LAYOUT,\r\n  DELETE_ROW_FROM_LAYOUT,\r\n  FETCH_ROWS_BEGIN,\r\n  FETCH_ROWS_FAILURE,\r\n  FETCH_ROWS_SUCCESS,\r\n  REMOVE_ARTICLE_FROM_LAYOUT,\r\n  REMOVE_ARTICLE_FROM_ROW,\r\n  REORDER_ARTICLE_IN_ROW,\r\n  UPDATE_LAYOUT\r\n} from '../../actions'\r\n\r\nimport Database from '../../Database'\r\n\r\nconst database = new Database('http://localhost:4000/rowsInLayout')\r\n\r\nconst rowsByIds = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_ROWS_BEGIN:\r\n      return state\r\n    case FETCH_ROWS_SUCCESS:\r\n      return action.payload.rowsInLayout.reverse().reduce((obj, row) => {\r\n        obj[row.id] = row\r\n        return obj\r\n      }, {})\r\n    case FETCH_ROWS_FAILURE:\r\n      return state\r\n    case ADD_ARTICLE_TO_LAYOUT:\r\n      database.updateRow(action.row, [...state[action.row].articlesInRow, action.id])\r\n\r\n      return {\r\n        ...state,\r\n        [action.row]: {\r\n          id: action.row,\r\n          articlesInRow: [...state[action.row].articlesInRow, action.id]\r\n        }\r\n      }\r\n    case ADD_NEW_ROW_TO_LAYOUT:\r\n      database.createRow({ id: action.id, articlesInRow: [] })\r\n\r\n      return {\r\n        ...state,\r\n        [action.id]: {\r\n          id: action.id,\r\n          articlesInRow: []\r\n        }\r\n      }\r\n    case DELETE_ROW_FROM_LAYOUT:\r\n      database.delete(action.id)\r\n      const newState = Object.assign({}, state)\r\n      delete newState[action.id]\r\n      return newState\r\n    case REMOVE_ARTICLE_FROM_LAYOUT:\r\n      database.updateRow(\r\n        action.rowId,\r\n        state[action.rowId].articlesInRow.filter(articleId => articleId !== action.id)\r\n      )\r\n\r\n      return {\r\n        ...state,\r\n        [action.rowId]: {\r\n          ...state[action.rowId],\r\n          articlesInRow: state[action.rowId].articlesInRow.filter(articleId => articleId !== action.id)\r\n        }\r\n      }\r\n    case REORDER_ARTICLE_IN_ROW:\r\n      database.updateRow(\r\n        action.id,\r\n        update(\r\n          state[action.id].articlesInRow, {\r\n            $splice: [[action.index, 1], [action.overIndex, 0, action.draggedId]]\r\n          }\r\n        )\r\n      )\r\n\r\n      return {\r\n        ...state,\r\n        [action.id]: {\r\n          ...state[action.id],\r\n          articlesInRow: update(\r\n            state[action.id].articlesInRow, {\r\n              $splice: [[action.index, 1], [action.overIndex, 0, action.draggedId]]\r\n            }\r\n          )\r\n        }\r\n      }\r\n    case REMOVE_ARTICLE_FROM_ROW:\r\n      database.updateRow(\r\n        action.id,\r\n        state[action.id].articlesInRow.filter(id => id !== action.articleId)\r\n      )\r\n\r\n      return {\r\n        ...state,\r\n        [action.id]: {\r\n          ...state[action.id],\r\n          articlesInRow: state[action.id].articlesInRow.filter(id => id !== action.articleId)\r\n        }\r\n      }\r\n\r\n    case UPDATE_LAYOUT:\r\n      database.updateRow(\r\n        action.row,\r\n        state[action.row].articlesInRow.indexOf(action.id) === -1 ?\r\n          [...state[action.row].articlesInRow, action.id] : state[action.row].articlesInRow\r\n      )\r\n\r\n      return {\r\n        ...state,\r\n        [action.row]: {\r\n          ...state[action.row],\r\n          articlesInRow: state[action.row].articlesInRow.indexOf(action.id) === -1 ?\r\n            [...state[action.row].articlesInRow, action.id] : state[action.row].articlesInRow\r\n        }\r\n      }\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst rowsInLayout = (state = [], action) => {\r\n  switch (action.type) {\r\n    case FETCH_ROWS_BEGIN:\r\n      return state\r\n    case FETCH_ROWS_SUCCESS:\r\n      return [...action.payload.rowsInLayout.map(row => row.id)]\r\n    case FETCH_ROWS_FAILURE:\r\n      return state\r\n    case ADD_NEW_ROW_TO_LAYOUT:\r\n      return [...state, action.id]\r\n    case DELETE_ROW_FROM_LAYOUT:\r\n      return state.filter(id => id !== action.id)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst rows = combineReducers({\r\n  rowsByIds,\r\n  rowsInLayout\r\n})\r\n\r\nexport default rows","import { combineReducers } from 'redux'\r\n\r\nimport {\r\n  FETCH_LAYOUT_BEGIN,\r\n  FETCH_LAYOUT_SUCCESS,\r\n  FETCH_LAYOUT_FAILURE,\r\n  ADD_ARTICLE_TO_LAYOUT,\r\n  UPDATE_LAYOUT,\r\n  REMOVE_ARTICLE_FROM_LAYOUT\r\n} from '../../actions'\r\nimport parameter from './parameter'\r\nimport rows from './rows'\r\n\r\nconst byIdsInLayout = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_LAYOUT_BEGIN:\r\n      return state\r\n    case FETCH_LAYOUT_SUCCESS:\r\n      return parameter(state.layout, action).reverse().reduce((obj, param) => {\r\n        obj[param.id] = param\r\n        return obj\r\n      }, {})\r\n    case FETCH_LAYOUT_FAILURE:\r\n      return state\r\n    case ADD_ARTICLE_TO_LAYOUT:\r\n      return {\r\n        ...state,\r\n        [action.id]: parameter(state[action.id], action)\r\n      }\r\n    case REMOVE_ARTICLE_FROM_LAYOUT:\r\n      const newLayout = Object.assign({}, state)\r\n      delete newLayout[action.id]\r\n      parameter(state[action.id], action)\r\n      return newLayout\r\n    case UPDATE_LAYOUT:\r\n      return Object.assign({}, state, {\r\n        [action.id]: parameter(state[action.id], action)\r\n      })\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst allIdsInLayout = (state = [], action) => {\r\n  switch (action.type) {\r\n    case FETCH_LAYOUT_BEGIN:\r\n      return state\r\n    case FETCH_LAYOUT_SUCCESS:\r\n      return [...parameter(state.layout, action).map(param => param.id)]\r\n    case FETCH_LAYOUT_FAILURE:\r\n      return state\r\n    case ADD_ARTICLE_TO_LAYOUT:\r\n      return [...state, action.id]\r\n    case REMOVE_ARTICLE_FROM_LAYOUT:\r\n      return state.filter(id => id !== action.id)\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst layout = combineReducers({\r\n  byIdsInLayout,\r\n  allIdsInLayout,\r\n  rows\r\n})\r\n\r\nexport default layout\r\n\r\n// Selectors\r\nexport const getIdsInLayout = state => state.allIdsInLayout\r\nexport const getLayoutParameters = state => state.allIdsInLayout.map(id => state.byIdsInLayout[id])\r\nexport const getAllRows = state => state.rows.rowsInLayout.map(id => state.rows.rowsByIds[id])\r\nexport const getRowById = (id, state) => state.rows.rowsByIds[id]\r\n","import { combineReducers } from 'redux'\r\n\r\nimport articles, * as fromArticles from './articles'\r\nimport layout, * as fromLayout from './layout'\r\n\r\nexport default combineReducers({\r\n  articles: articles,\r\n  layout: layout\r\n})\r\n\r\n//Article selectors\r\nexport const getAllArticles = state =>\r\n  fromArticles.getAllArticles(state.articles)\r\n\r\nexport const isAllArticlesLoading = state =>\r\n  fromArticles.isAllArticlesLoading(state.articles)\r\n\r\nexport const isAllArticlesLoadingError = state =>\r\n  fromArticles.isAllArticlesLoadingError(state.articles)\r\n\r\nexport const getArticlesById = (id, state) =>\r\n  fromArticles.getArticlesById(id, state.articles)\r\n\r\nexport const getAllArticlesInLayout = state =>\r\n  fromArticles.getAllArticles(state.articles).filter(article => fromLayout.getIdsInLayout(state.layout).indexOf(article.id) !== -1)\r\n\r\n//Layout selectors\r\nexport const getIdsInLayout = state =>\r\n  fromLayout.getIdsInLayout(state.layout)\r\n\r\nexport const getLayoutParameters = state =>\r\n  fromLayout.getLayoutParameters(state.layout)\r\n\r\n// export const canUndoLayout = state =>\r\n//   fromLayout.canUndoLayout(state.layout)\r\n//\r\n// export const canRedoLayout = state =>\r\n//   fromLayout.canRedoLayout(state.layout)\r\n\r\nexport const getAllRows = state =>\r\n  fromLayout.getAllRows(state.layout)\r\n\r\nexport const getRowById = (id, state) =>\r\n  fromLayout.getRowById(id, state.layout)","export const shortenContent = (str, numOfWords) =>\r\n  str.split(' ').slice(0, numOfWords).join(' ')","const ELEMENT_SEPARATOR = '__',\r\n  MODIFIER_SEPARATOR = '_'\r\n\r\nfunction getBEMPAth({ b, e, m }) {\r\n  const base = e ? [b, e].join(ELEMENT_SEPARATOR) : b\r\n\r\n  return [base, ...m.map(modifier => [base, modifier].join(MODIFIER_SEPARATOR))]\r\n    .join(' ')\r\n    .trim()\r\n}\r\n\r\nconst b = b => (elementName, modifiers = {}) => {\r\n  let e, m\r\n\r\n  if (typeof elementName === 'string') {\r\n    e = elementName\r\n  } else {\r\n    modifiers = elementName || {}\r\n  }\r\n\r\n  if (Array.isArray(modifiers)) {\r\n    m = modifiers\r\n  } else {\r\n    m = Object.keys(modifiers).filter(modifier => modifiers[modifier]) || []\r\n  }\r\n\r\n  return getBEMPAth({ b, e, m })\r\n}\r\n\r\nexport default b\r\n","// @flow\r\nimport React from 'react'\r\nimport { DragSource } from 'react-dnd/lib/index'\r\nimport { Link } from 'react-router-dom'\r\nimport flow from 'lodash/flow'\r\n\r\nimport { shortenContent } from '../../../helpers/shortenContent'\r\n\r\nimport './Article.scss'\r\nimport BEM from '../../../helpers/BEM'\r\n\r\nconst b = BEM('Article')\r\n\r\ntype ArticleProps = {\r\n  article: Object,\r\n  itemDeleter: number => Object,\r\n  connectDragSource: Function,\r\n  isDragging: boolean\r\n}\r\n\r\nconst Article = ({ isDragging, connectDragSource, article, itemDeleter }: ArticleProps) => (\r\n  connectDragSource(\r\n    <li className={b()} style={{ opacity: isDragging ? 0 : 1 }}>\r\n      <h4 className={b('title')}>{article.title}</h4>\r\n      <div className={b('modifiers')}>\r\n        <button\r\n          className={b('remove')}\r\n          onClick={() => itemDeleter(article.id)}\r\n        >\r\n          Remove\r\n        </button>\r\n        <Link\r\n          to={{ pathname: `/edit-article/${article.id}` }}\r\n          className={b('edit')}\r\n        >\r\n          Edit\r\n        </Link>\r\n      </div>\r\n      <p className={b('content')}>\r\n        {shortenContent(article.content, 50)}\r\n      </p>\r\n      <small className={b('author')}>{article.author}</small>\r\n      <time className={b('date')}>{article.date}</time>\r\n    </li>)\r\n)\r\n\r\nexport default flow(\r\n  DragSource(\r\n    'Article',\r\n    {\r\n      beginDrag: props =>\r\n        props.article\r\n    },\r\n    (connect, monitor) => ({\r\n      connectDragSource: connect.dragSource(),\r\n      connectDragPreview: connect.dragPreview(),\r\n      isDragging: monitor.isDragging()\r\n    })\r\n  )\r\n)(Article)\r\n","export const updateLocalStorage = (data, storageName) =>\r\n  localStorage.setItem(storageName, JSON.stringify(data))\r\n","// @flow\r\nimport React, { Component } from 'react'\r\nimport { DropTarget } from 'react-dnd/lib/index'\r\nimport { connect } from 'react-redux'\r\nimport flow from 'lodash/flow'\r\n\r\nimport {\r\n  getAllArticles,\r\n  isAllArticlesLoading,\r\n  isAllArticlesLoadingError,\r\n  getIdsInLayout,\r\n  getAllRows,\r\n  getLayoutParameters\r\n} from '../../reducers'\r\nimport {\r\n  deleteRowFromLayout,\r\n  fetchArticles, fetchLayout, fetchRows,\r\n  removeArticle,\r\n  removeArticleFromLayout,\r\n  updateArticle, updateLayout\r\n} from '../../actions'\r\nimport Article from './Article'\r\n\r\nimport { updateLocalStorage } from '../../helpers/manageLocalStorage'\r\n\r\nimport './Sidebar.scss'\r\nimport BEM from '../../helpers/BEM'\r\n\r\nconst b = BEM('Sidebar')\r\n\r\ntype SidebarProps = {\r\n  addNewToArticles: Object => Object,\r\n  articles: Array<Object>,\r\n  canDrop: boolean,\r\n  connectDropTarget: Function,\r\n  error: null | Object,\r\n  fetchContent: () => Object | Promise<Object>,\r\n  hovered: boolean,\r\n  loading: boolean,\r\n  removeArticle: number => Object,\r\n  removeArticleFromLayout: Function,\r\n  updateArticle: Function,\r\n  updateLayout: Object => Object,\r\n  deleteRowFromLayout: number => Object,\r\n  layoutRows: Array<Object>,\r\n  layoutParameters: Array<Object>\r\n}\r\n\r\nclass Sidebar extends Component<SidebarProps> {\r\n  state = {\r\n    dragging: false,\r\n    style: (localStorage.getItem('sidebarStyles')) ?\r\n      JSON.parse(localStorage.getItem('sidebarStyles'))\r\n      : {\r\n        minWidth: '300px',\r\n        maxWidth: '300px'\r\n      },\r\n    initX: null,\r\n    initialMaxWidth: 300\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.props.fetchArticles()\r\n    this.props.fetchLayout()\r\n    this.props.fetchRows()\r\n  }\r\n\r\n  updateSize = width => {\r\n    updateLocalStorage({\r\n      minWidth: width,\r\n      maxWidth: width\r\n    }, 'sidebarStyles')\r\n\r\n    this.setState(Object.assign({}, this.state, {\r\n      style: JSON.parse(localStorage.getItem('sidebarStyles'))\r\n    }))\r\n\r\n  }\r\n\r\n  handleMouseDown = e => {\r\n    e.preventDefault()\r\n    if (!this.state.dragging)\r\n      this.setState({ dragging: true })\r\n\r\n    window.addEventListener('mouseup', this.handleMouseUp)\r\n    window.addEventListener('mousemove', this.handleMouseMove)\r\n  }\r\n\r\n  handleMouseUp = () => {\r\n    if (this.state.dragging)\r\n      this.setState({ dragging: false, initX: null })\r\n\r\n    window.removeEventListener('mousemove', this.handleMouseMove)\r\n    window.removeEventListener('mouseup', this.handleMouseUp)\r\n  }\r\n\r\n  handleMouseMove = e => {\r\n    e.preventDefault()\r\n\r\n    if (!this.state.initX) {\r\n      const initialMaxWidth = parseInt(this.state.style.maxWidth.replace('px', ''))\r\n      this.setState(state => ({\r\n        ...state,\r\n        initX: e.pageX,\r\n        initialMaxWidth: initialMaxWidth\r\n      }))\r\n\r\n    } else {\r\n      const delta = e.pageX - this.state.initX\r\n      const maxWidth = `${this.state.initialMaxWidth + delta}px`\r\n      if (this.state.initialMaxWidth + delta < 500 && this.state.initialMaxWidth + delta > 200)\r\n        this.updateSize(maxWidth)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      connectDropTarget,\r\n      hovered,\r\n      error,\r\n      loading,\r\n      articles,\r\n      removeArticle\r\n    } = this.props\r\n\r\n    const { dragging } = this.state\r\n\r\n    if (error) return <div>Error! {error.message}</div>\r\n\r\n    if (loading) return <div>Loading...</div>\r\n\r\n    return connectDropTarget(\r\n      <aside className={b()} style={{\r\n        background: hovered ? '#81ecec' : '#ecf0f1',\r\n        minWidth: this.state.style.minWidth,\r\n        maxWidth: this.state.style.maxWidth\r\n      }}>\r\n        <ul className={b('blog-list')}>\r\n          {articles.map(article => (\r\n            <Article\r\n              article={article}\r\n              key={article.id}\r\n              itemDeleter={removeArticle}\r\n            />\r\n          ))}\r\n        </ul>\r\n        {dragging ?\r\n          <div className={b('resize-bar', ['active'])} onMouseDown={e => this.handleMouseDown(e)}>\r\n            control-size\r\n          </div>\r\n          : <div className={b('resize-bar')} onMouseDown={e => this.handleMouseDown(e)}>\r\n            control-size\r\n          </div>\r\n        }\r\n      </aside>\r\n    )\r\n  }\r\n}\r\n\r\nexport default flow(\r\n  DropTarget(\r\n    'Article',\r\n    {\r\n      drop: (props, monitor) => {\r\n        const result = props.articles.filter(article => article.id === monitor.getItem().id)\r\n\r\n        if (result.length === 0) {\r\n          props.removeArticleFromLayout(monitor.getItem().id, monitor.getItem().row)\r\n          props.layoutParameters.filter(param => param.row === monitor.getItem().row && param.id !== monitor.getItem().id)\r\n            .map(param => props.updateLayout(\r\n              param.id,\r\n              `${12 / (props.layoutParameters.length - 1)}`,\r\n              param.row\r\n            ))\r\n\r\n          if (props.layoutRows.filter(row => row.id === monitor.getItem().row)[0].articlesInRow.length === 1)\r\n            props.deleteRowFromLayout(monitor.getItem().row)\r\n        }\r\n      }\r\n    },\r\n    (connect, monitor) => ({\r\n      connectDropTarget: connect.dropTarget(),\r\n      hovered: monitor.isOver()\r\n    })\r\n  ),\r\n  connect(\r\n    state => ({\r\n      articles: getAllArticles(state).filter(article => getIdsInLayout(state).indexOf(article.id) === -1),\r\n      loading: isAllArticlesLoading(state),\r\n      error: isAllArticlesLoadingError(state),\r\n      layoutRows: getAllRows(state),\r\n      layoutParameters: getLayoutParameters(state)\r\n    }),\r\n    {\r\n      fetchArticles,\r\n      removeArticle,\r\n      updateArticle,\r\n      removeArticleFromLayout,\r\n      deleteRowFromLayout,\r\n      updateLayout,\r\n      fetchRows,\r\n      fetchLayout\r\n    }\r\n  )\r\n)(Sidebar)\r\n","// @flow\r\nimport React, { Component } from 'react'\r\nimport { DragSource, DropTarget } from 'react-dnd/lib/index'\r\nimport { connect } from 'react-redux'\r\nimport flow from 'lodash/flow'\r\n\r\nimport {\r\n  deleteRowFromLayout,\r\n  removeArticleFromLayout,\r\n  reorderArticleInRow,\r\n  updateLayout\r\n} from '../../../actions'\r\n\r\nimport { shortenContent } from '../../../helpers/shortenContent'\r\n\r\nimport '../../../grid.scss'\r\nimport './LayoutArticle.scss'\r\nimport BEM from '../../../helpers/BEM'\r\n\r\nconst b = BEM('LayoutArticle')\r\n\r\ntype LayoutArticleProps = {\r\n  index: number,\r\n  allArticlesInRow: Array<string>,\r\n  allRowParameters: Array<Object>,\r\n  article: Object,\r\n  connectDragPreview: Function,\r\n  connectDragSource: Function,\r\n  connectDropTarget: Function,\r\n  containerWidth: number,\r\n  parameters: Object,\r\n  rowId: string,\r\n  deleteRowFromLayout: number => Object,\r\n  removeArticleFromLayout: Function,\r\n  reorderArticleInRow: Function,\r\n  updateLayout: Object => Object,\r\n  isDragging: boolean,\r\n  resize: boolean,\r\n}\r\n\r\nclass LayoutArticle extends Component<LayoutArticleProps> {\r\n  state = {\r\n    dragging: false,\r\n    initX: null,\r\n    initialMaxWidth: null,\r\n    size: null\r\n  }\r\n\r\n  setArticlesCells = (size, articleId) => {\r\n    const { allArticlesInRow, updateLayout, rowId, parameters } = this.props\r\n\r\n    if (allArticlesInRow.length < 3) {\r\n      articleId !== parameters.id ?\r\n        updateLayout(articleId, `${12 - size}`, rowId) :\r\n        updateLayout(articleId, `${size}`, rowId)\r\n    } else if (allArticlesInRow.length === 3) {\r\n      articleId !== parameters.id ?\r\n        updateLayout(articleId, `${Math.round((12 - size) / 2)}`, rowId) :\r\n        updateLayout(articleId, `${size}`, rowId)\r\n    } else if (allArticlesInRow.length > 3) {\r\n      articleId !== parameters.id ?\r\n        updateLayout(articleId, `${Math.round((12 - size) / 3)}`, rowId) :\r\n        updateLayout(articleId, `${size}`, rowId)\r\n    }\r\n  }\r\n\r\n  handleMouseDown = e => {\r\n    e.preventDefault()\r\n    if (!this.state.dragging) {\r\n      this.setState(state => ({\r\n        ...state,\r\n        dragging: true,\r\n        initialMaxWidth: this.props.containerWidth / 12 * parseInt(this.props.parameters.col),\r\n        size: this.props.containerWidth / 12 * parseInt(this.props.parameters.col)\r\n      }))\r\n    }\r\n\r\n    window.addEventListener('mouseup', this.handleMouseUp)\r\n    window.addEventListener('mousemove', this.handleMouseMove)\r\n  }\r\n\r\n  handleMouseUp = () => {\r\n    if (this.state.dragging)\r\n      this.setState(state => ({\r\n        ...state,\r\n        initX: null,\r\n        dragging: false\r\n      }))\r\n\r\n    window.removeEventListener('mousemove', this.handleMouseMove)\r\n    window.removeEventListener('mouseup', this.handleMouseUp)\r\n\r\n    this.props.allArticlesInRow.map(articleId =>\r\n      this.setArticlesCells(Math.round(this.state.size / (this.props.containerWidth / 12)), articleId)\r\n    )\r\n  }\r\n\r\n  handleMouseMove = e => {\r\n    e.preventDefault()\r\n    if (!this.state.initX) {\r\n      this.setState(state => ({\r\n        ...state,\r\n        initX: e.pageX,\r\n        initialMaxWidth: this.state.size\r\n      }))\r\n    } else {\r\n      const delta = e.pageX - this.state.initX\r\n      const maxWidth = this.state.initialMaxWidth + delta\r\n\r\n      this.setState(state => ({\r\n        ...state,\r\n        size: maxWidth\r\n      }))\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { size } = this.state\r\n    const {\r\n      parameters,\r\n      article,\r\n      connectDropTarget,\r\n      connectDragSource,\r\n      removeArticleFromLayout,\r\n      resize,\r\n      allArticlesInRow,\r\n      deleteRowFromLayout,\r\n      rowId,\r\n      updateLayout\r\n    } = this.props\r\n\r\n    return connectDropTarget(\r\n      connectDragSource(\r\n        <div className={`grid__cell_${parameters.col} ${b()}`}\r\n             style={this.state.dragging ? { minWidth: `${size}px`, maxWidth: `${size}px` } : {}}>\r\n          <div className={b('content-container')}>\r\n            <h2 className={b('title')}>{article.title}</h2>\r\n            <button\r\n              className={b('remove')}\r\n              onClick={() => {\r\n                removeArticleFromLayout(article.id, parameters.row)\r\n                if (allArticlesInRow.length === 1) deleteRowFromLayout(rowId)\r\n\r\n                allArticlesInRow.filter(articleId => articleId !== article.id)\r\n                  .map(articleId => updateLayout(\r\n                    articleId,\r\n                    `${12 / (parameters.length - 1)}`,\r\n                    rowId\r\n                  ))\r\n              }}\r\n            >\r\n              Remove\r\n            </button>\r\n            <p className={b('content')}>\r\n              {shortenContent(article.content, 50)}\r\n            </p>\r\n            <small className={b('author')}>{article.author}</small>\r\n            <time className={b('date')}>{article.date}</time>\r\n          </div>\r\n          {resize ?\r\n            <div className={b('resize')} onMouseDown={e => this.handleMouseDown(e)}>\r\n            </div> : null\r\n          }\r\n        </div>\r\n      )\r\n    )\r\n  }\r\n}\r\n\r\nexport default flow(\r\n  DragSource(\r\n    'Article',\r\n    {\r\n      beginDrag: props => ({\r\n        id: props.article.id,\r\n        index: props.index,\r\n        col: props.parameters.col,\r\n        row: props.parameters.row\r\n      }),\r\n\r\n      endDrag: (props) =>\r\n        props.parameters.id\r\n    },\r\n    (connect, monitor) => ({\r\n      connectDragSource: connect.dragSource(),\r\n      connectDragPreview: connect.dragPreview(),\r\n      isDragging: monitor.isDragging()\r\n    })\r\n  ),\r\n  DropTarget(\r\n    'Article',\r\n    {\r\n      canDrop: () => false,\r\n      hover: (props, monitor) => {\r\n        const dragRow = monitor.getItem().row\r\n        const draggedId = monitor.getItem().id\r\n        const index = monitor.getItem().index\r\n        const overRow = props.parameters.row\r\n        const overId = props.article.id\r\n        const overIndex = props.index\r\n\r\n        if (index === overIndex) return\r\n        if (draggedId === overId) return\r\n        if (dragRow !== overRow) return\r\n\r\n        if (index !== undefined && overIndex !== undefined)\r\n          props.reorderArticleInRow(props.rowId, index, overIndex, draggedId, overId)\r\n\r\n        monitor.getItem().index = overIndex\r\n      }\r\n    },\r\n    connect => ({\r\n      connectDropTarget: connect.dropTarget()\r\n    })\r\n  ),\r\n  connect(\r\n    null,\r\n    {\r\n      reorderArticleInRow,\r\n      updateLayout,\r\n      removeArticleFromLayout,\r\n      deleteRowFromLayout\r\n    }\r\n  )\r\n)(LayoutArticle)\r\n","// @flow\r\nimport React, { useEffect, useState } from 'react'\r\nimport { DropTarget } from 'react-dnd/lib/index'\r\nimport { connect } from 'react-redux'\r\nimport flow from 'lodash/flow'\r\n\r\nimport {\r\n  addArticleToLayout,\r\n  removeArticleFromLayout,\r\n  removeArticleFromRow,\r\n  updateLayout,\r\n  deleteRowFromLayout\r\n} from '../../../actions'\r\nimport LayoutArticle from '../LayoutArticle'\r\n\r\nimport './Row.scss'\r\nimport '../../../grid.scss'\r\nimport BEM from '../../../helpers/BEM'\r\n\r\nconst b = BEM('Row')\r\n\r\ntype RowProps = {\r\n  row: string,\r\n  articlesInRow: Array<Object>,\r\n  parameters: Array<Object>,\r\n  connectDropTarget: Object => Object,\r\n  articlesIdsInRow: Array<string>\r\n}\r\n\r\nconst Row = ({ row, articlesInRow, parameters, connectDropTarget, articlesIdsInRow, hovered, canDrop }: RowProps) => {\r\n  const [dimension, setDimension] = useState(null)\r\n  let container\r\n\r\n  useEffect(() => {\r\n    setDimension(container.offsetWidth)\r\n  })\r\n\r\n  const setBackgroundColor = () => {\r\n    if (canDrop && hovered)\r\n      return '#81ecec'\r\n    else if (!canDrop && hovered)\r\n      return '#ff7675'\r\n    else return 'none'\r\n  }\r\n\r\n  return connectDropTarget(\r\n    <section className={`grid grid_no-transition ${b()}`} ref={el => container = el}\r\n             style={{ backgroundColor: setBackgroundColor() }}>\r\n      {articlesInRow.map(\r\n        (article, i) => articlesInRow[articlesInRow.length - 1] === article ?\r\n          < LayoutArticle\r\n            key={article.id}\r\n            index={i}\r\n            rowId={row}\r\n            containerWidth={dimension}\r\n            article={article}\r\n            allArticlesInRow={articlesIdsInRow}\r\n            parameters={parameters.filter(param => param.id === article.id)[0]}\r\n            resize={false}\r\n          /> :\r\n          <LayoutArticle\r\n            key={article.id}\r\n            index={i}\r\n            rowId={row}\r\n            containerWidth={dimension}\r\n            article={article}\r\n            allArticlesInRow={articlesIdsInRow}\r\n            parameters={parameters.filter(param => param.id === article.id)[0]}\r\n            resize={true}\r\n          />\r\n      )}\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default flow(\r\n  DropTarget(\r\n    'Article',\r\n    {\r\n      canDrop: props =>\r\n        props.articlesInRow.length < 4\r\n      ,\r\n      drop: (props, monitor) => {\r\n        if (props.articlesIdsInRow.indexOf(monitor.getItem().id) === -1) {\r\n          if (!monitor.getItem().row) {\r\n            if (props.parameters.length !== 0) {\r\n              props.parameters.map(article => props.updateLayout(\r\n                article.id,\r\n                `${12 / (props.parameters.length + 1)}`,\r\n                props.row\r\n              ))\r\n              props.addArticleToLayout({\r\n                id: monitor.getItem().id,\r\n                col: `${12 / (props.parameters.length + 1)}`,\r\n                row: props.row\r\n              })\r\n            } else {\r\n              props.addArticleToLayout({\r\n                id: monitor.getItem().id,\r\n                col: '12',\r\n                row: props.row\r\n              })\r\n            }\r\n          } else {\r\n            props.removeArticleFromRow(monitor.getItem().row, monitor.getItem().id)\r\n\r\n            if (props.allRows.filter(row => monitor.getItem().row === row.id)[0].articlesInRow.length === 1)\r\n              props.deleteRowFromLayout(monitor.getItem().row)\r\n\r\n            const paramsInRow = props.allParameters.filter(param =>\r\n              param.row === monitor.getItem().row && param.id !== monitor.getItem().id)\r\n\r\n            paramsInRow.map(param => props.updateLayout(\r\n              param.id,\r\n              `${12 / (paramsInRow.length - 1)}`,\r\n              param.row\r\n            ))\r\n\r\n            props.updateLayout(monitor.getItem().id, monitor.getItem().col, props.row)\r\n          }\r\n        }\r\n      }\r\n    },\r\n    (connect, monitor) => ({\r\n      connectDropTarget: connect.dropTarget(),\r\n      hovered: monitor.isOver(),\r\n      item: monitor.getItem(),\r\n      canDrop: monitor.canDrop()\r\n    })\r\n  ),\r\n  connect(\r\n    null,\r\n    {\r\n      addArticleToLayout,\r\n      removeArticleFromLayout,\r\n      updateLayout,\r\n      removeArticleFromRow,\r\n      deleteRowFromLayout\r\n    }\r\n  )\r\n)(Row)","import React from 'react'\r\n// import { ActionCreators as UndoActionCreators } from 'redux-undo'\r\n// import { connect } from 'react-redux'\r\n\r\nimport BEM from '../../helpers/BEM'\r\nimport './Toolbar.scss'\r\nimport { NavLink } from 'react-router-dom'\r\n// import { canRedoLayout, canUndoLayout } from '../../reducers'\r\n\r\nconst b = BEM('Toolbar')\r\n\r\nconst Toolbar = ({ canUndo, canRedo, onUndo, onRedo }) => (\r\n  <nav className={b()}>\r\n    <button className={b('button', ['undo'])}>\r\n      Undo\r\n    </button>\r\n    <button className={b('button', ['redo'])}>\r\n      Redo\r\n    </button>\r\n    <button className={b('button', ['save'])}>\r\n      Save\r\n    </button>\r\n    <NavLink className={b('button', ['preview'])} to={'/layout'}>\r\n      Preview\r\n    </NavLink>\r\n  </nav>\r\n)\r\n\r\n// export default connect(\r\n//   state => ({\r\n//     canUndo: canUndoLayout(state).length > 0,\r\n//     canRedo: canRedoLayout(state).length > 0\r\n//   }),\r\n//   {\r\n//     onUndo: UndoActionCreators.undo,\r\n//     onRedo: UndoActionCreators.redo\r\n//   }\r\n// )(Toolbar)\r\n\r\nexport default Toolbar","// @flow\r\nimport React, { useEffect } from 'react'\r\nimport { DropTarget } from 'react-dnd/lib/index'\r\nimport { connect } from 'react-redux'\r\nimport flow from 'lodash/flow'\r\n\r\nimport {\r\n  fetchArticles,\r\n  fetchLayout,\r\n  fetchRows,\r\n  addArticleToLayout,\r\n  removeArticleFromLayout,\r\n  addNewRowToLayout\r\n} from '../../actions'\r\nimport {\r\n  getAllArticlesInLayout,\r\n  getAllRows,\r\n  getLayoutParameters\r\n} from '../../reducers'\r\n\r\nimport Row from './Row'\r\nimport Toolbar from '../Toolbar'\r\n\r\nimport './Layout.scss'\r\nimport BEM from '../../helpers/BEM'\r\n\r\nconst b = BEM('Layout')\r\n\r\ntype LayoutProps = {\r\n  fetchLayout: () => Object | Promise<Object>,\r\n  fetchArticles: () => Object | Promise<Object>,\r\n  fetchRows: () => Object | Promise<Object>,\r\n  articlesInLayout: Array<Object>,\r\n  layoutParameters: Array<Object>,\r\n  rows: Array<any>,\r\n  addArticleToLayout: Object => Object,\r\n  addNewRowToLayout: Object => Object,\r\n  removeArticleFromLayout: number => Object,\r\n  hovered: boolean,\r\n  canDrop: boolean,\r\n  connectDropTarget: Object => Object\r\n}\r\n\r\nconst Layout = (props: LayoutProps) => {\r\n  const {\r\n    connectDropTarget,\r\n    articlesInLayout,\r\n    fetchLayout,\r\n    fetchArticles,\r\n    fetchRows,\r\n    layoutParameters,\r\n    rows,\r\n    hovered\r\n  } = props\r\n\r\n  useEffect(() => {\r\n    fetchArticles()\r\n    fetchLayout()\r\n    fetchRows()\r\n  }, [])\r\n\r\n  return connectDropTarget(\r\n    <div className={b()} style={{ backgroundColor: hovered ? '#ecf0f1' : '#ffffff' }}>\r\n      {rows.map(row =>\r\n        <Row key={row.id}\r\n             row={row.id}\r\n             parameters={layoutParameters.filter(param => param.row === row.id)}\r\n             allRows={rows}\r\n             allParameters={layoutParameters}\r\n             articlesInRow={row.articlesInRow.map(\r\n               id => articlesInLayout.filter(article => article.id === id)[0]\r\n             )}\r\n             articlesIdsInRow={row.articlesInRow}\r\n        />\r\n      )}\r\n      <Toolbar/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default flow(\r\n  DropTarget(\r\n    'Article',\r\n    {\r\n      drop: (props, monitor) => {\r\n        if (props.layoutParameters.filter(param => param.id === monitor.getItem().id).length === 0)\r\n          props.addArticleToLayout({\r\n            id: monitor.getItem().id,\r\n            col: '12',\r\n            row: props.addNewRowToLayout().id\r\n          })\r\n      },\r\n\r\n      canDrop: (props, monitor) =>\r\n        props.articlesInLayout.filter(article => article.id === monitor.getItem().id).length === 0\r\n    },\r\n    (connect, monitor) => (\r\n      {\r\n        connectDropTarget: connect.dropTarget(),\r\n        hovered: monitor.isOver(),\r\n        canDrop: monitor.canDrop()\r\n      }\r\n    )\r\n  ),\r\n  connect(\r\n    state => ({\r\n      articlesInLayout: getAllArticlesInLayout(state),\r\n      layoutParameters: getLayoutParameters(state),\r\n      rows: getAllRows(state)\r\n    }),\r\n    {\r\n      fetchArticles,\r\n      fetchLayout,\r\n      fetchRows,\r\n      addArticleToLayout,\r\n      removeArticleFromLayout,\r\n      addNewRowToLayout\r\n    }\r\n  ))(Layout)","import React from 'react'\r\nimport { DragDropContext } from 'react-dnd'\r\nimport HTML5Backend from 'react-dnd-html5-backend'\r\n\r\nimport Sidebar from '../Sidebar'\r\nimport Layout from '../Layout'\r\n\r\nimport './MainPage.scss'\r\nimport BEM from '../../helpers/BEM'\r\n\r\nconst b = BEM('MainPage')\r\n\r\nconst MainPage = () => (\r\n  <main className={b()}>\r\n    <Sidebar/>\r\n    <Layout/>\r\n  </main>\r\n)\r\n\r\nexport default DragDropContext(HTML5Backend)(MainPage)","// @flow\r\nimport React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { shortenContent } from '../../../helpers/shortenContent'\r\n\r\nimport './PostContainer.scss'\r\nimport '../../../grid.scss'\r\nimport BEM from '../../../helpers/BEM'\r\n\r\nconst b = BEM('PostContainer')\r\n\r\ntype PostContainerProps = {\r\n  articlesInRow: Array<string>,\r\n  parametersOfRowArticles: Array<Object>\r\n}\r\n\r\nconst PostContainer = ({ articlesInRow, parametersOfRowArticles }: PostContainerProps) => {\r\n  return (\r\n    <div className={'grid grid_no-transition'}>\r\n      {articlesInRow.map(article => (\r\n          <Link to={{ pathname: '/view_post', state: { data: article } }}\r\n                className={`grid__cell_${parametersOfRowArticles.filter(param => param.id === article.id)[0].col} ${b()}`}>\r\n            <h2 className={b('title')}>{article.title}</h2>\r\n            <p className={b('content')}>{shortenContent(article.content, 100)}</p>\r\n            <small className={b('author')}>{article.author}</small>\r\n            <time className={b('date')}>{article.date}</time>\r\n          </Link>\r\n        )\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PostContainer","// @flow\r\nimport React, { useEffect } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport PostContainer from './PostsContainer'\r\nimport { fetchLayout, fetchArticles, fetchRows } from '../../actions'\r\nimport { getAllArticles, getAllRows, getIdsInLayout, getLayoutParameters } from '../../reducers'\r\n\r\nimport '../../grid.scss'\r\n\r\ntype PostsProps = {\r\n  articlesInLayout: Array<Object>,\r\n  layoutParameters: Array<Object>,\r\n  fetchLayout: Function,\r\n  fetchArticles: Function,\r\n  fetchRows: Function,\r\n  rows: Array<string>\r\n}\r\n\r\nconst Posts = ({ articlesInLayout, layoutParameters, fetchLayout, fetchArticles, fetchRows, rows }: PostsProps) => {\r\n  useEffect(() => {\r\n    fetchArticles()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    fetchLayout()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    fetchRows()\r\n  }, [])\r\n\r\n  return (\r\n    rows.map(row =>\r\n      <PostContainer\r\n        key={row.id}\r\n        articleIdsInRow={row.articlesInRow}\r\n        articlesInRow={articlesInLayout.filter(article => row.articlesInRow.indexOf(article.id) !== -1)}\r\n        parametersOfRowArticles={layoutParameters.filter(param => row.articlesInRow.indexOf(param.id !== -1))}\r\n      />\r\n    )\r\n  )\r\n}\r\n\r\nexport default connect(\r\n  state => ({\r\n    articlesInLayout: getAllArticles(state).filter(article => getIdsInLayout(state).indexOf(article.id) !== -1),\r\n    layoutParameters: getLayoutParameters(state),\r\n    rows: getAllRows(state)\r\n  }),\r\n  { fetchLayout, fetchArticles, fetchRows }\r\n)(Posts)","import { useState } from 'react'\r\n\r\nexport const useFormInput = initValue => {\r\n  const [value, setValue] = useState(initValue)\r\n  const onChange = ev => setValue(ev.target.value)\r\n  return { value, onChange }\r\n}\r\n","//@flow\r\nimport React from 'react'\r\n\r\nimport './Tags.scss'\r\nimport BEM from '../../helpers/BEM'\r\n\r\nconst b = BEM('Tags')\r\n\r\ntype TagsProps = {\r\n  className: string,\r\n  handleDelete: Function,\r\n  handleInputChange: Function,\r\n  handleInputKeyDown: Function,\r\n  input: string,\r\n  tags: ?Array<string>\r\n}\r\n\r\nconst Tags = ({ className, handleDelete, handleInputChange, handleInputKeyDown, input, tags }: TagsProps) =>\r\n  tags ? (\r\n    <label className={className}>\r\n      <ul className={b('container')}>\r\n        {tags.map((item, tag) =>\r\n          <li key={tag} className={b('item')}>\r\n            {item}\r\n            <span className={b('item_delete')} onClick={handleDelete.bind(this, tag)}>\r\n                  <img src=\"https://res.cloudinary.com/dum2a6djw/image/upload/c_scale,w_12/v1552900349/delete.png\"\r\n                       alt=\"delete tag\"/>\r\n            </span>\r\n          </li>\r\n        )}\r\n        <input\r\n          className={b('input')}\r\n          placeholder={'#add tags'}\r\n          value={input}\r\n          onChange={handleInputChange}\r\n          onKeyDown={handleInputKeyDown}/>\r\n      </ul>\r\n    </label>\r\n  ) : (\r\n    <p/>\r\n  )\r\n\r\nexport default Tags\r\n\r\n\r\n\r\n\r\n","//@flow\r\nimport React, { useEffect, useRef } from 'react'\r\nimport autosize from 'autosize'\r\n\r\ntype TextareaProps = {\r\n  classname: string,\r\n  name: string,\r\n  onChange: Function,\r\n  placeholder: string,\r\n  value: ?string\r\n}\r\n\r\nconst Textarea = (props: TextareaProps) => {\r\n  const textarea = useRef(null)\r\n\r\n  useEffect(() => {\r\n    autosize(textarea.current)\r\n  })\r\n\r\n  return (\r\n    <textarea\r\n      ref={textarea}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport default Textarea","// @flow\r\nimport React, { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { addArticle, fetchArticles, updateArticle } from '../../actions'\r\nimport {\r\n  getArticlesById,\r\n  isAllArticlesLoading,\r\n  isAllArticlesLoadingError\r\n} from '../../reducers'\r\nimport {\r\n  withProps,\r\n  compose,\r\n  branch,\r\n  renderComponent,\r\n  flattenProp\r\n} from 'recompose'\r\nimport { useFormInput } from '../../helpers/hooks'\r\nimport Tags from '../Tags'\r\nimport Textarea from '../Textarea'\r\n\r\nimport './WriteBlog.scss'\r\nimport BEM from '../../helpers/BEM'\r\n\r\nconst b = BEM('WriteBlog')\r\nconst SPACE_KYE_CODE = 32\r\n\r\nconst WriteBlog = props => {\r\n  const title = useFormInput(props.title)\r\n  const content = useFormInput(props.content)\r\n  const author = useFormInput(props.author)\r\n\r\n  const [tags, setTags] = useState(props.tags)\r\n  const [input, setInput] = useState('')\r\n\r\n  const handleInputChange = e => setInput(e.target.value)\r\n  const handleInputKeyDown = e => {\r\n    if ( e.keyCode === SPACE_KYE_CODE ) {\r\n      const {value} = e.target;\r\n      setTags([...tags, value])\r\n      setInput('')\r\n    }\r\n    if ( tags.length && e.keyCode === 8 && !input.length ) {\r\n      setTags(tags.slice(0, tags.length - 1))\r\n    }\r\n  }\r\n  const handleRemoveTag = tag => {\r\n    setTags(tags.filter((item, index) => index !== tag))\r\n  }\r\n\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault()\r\n    const article = {\r\n      title: title.value,\r\n      content: content.value,\r\n      author: author.value,\r\n      tags\r\n    }\r\n    props.publishArticle(article)\r\n  }\r\n\r\n  return (\r\n    <form className={'WriteBlog'} onSubmit={handleSubmit}>\r\n      <input\r\n        className={b('title')}\r\n        placeholder=\"Title\"\r\n        name={'title'}\r\n        {...title}\r\n      />\r\n      <input\r\n        className={b('author')}\r\n        placeholder=\"Author\"\r\n        name={'author'}\r\n        {...author}\r\n      />\r\n      <Tags\r\n        className={b('tags')}\r\n        tags={tags}\r\n        input={input}\r\n        handleDelete={handleRemoveTag}\r\n        handleInputKeyDown={handleInputKeyDown}\r\n        handleInputChange={handleInputChange}\r\n      />\r\n      <Textarea\r\n        className={b('content')}\r\n        name=\"content\"\r\n        placeholder={'Tell us your story...'}\r\n        {...content}\r\n      />\r\n      <button className={b('publish-button')} type=\"submit\">\r\n        Ready To Publish?\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst enhancer = compose(\r\n  connect(\r\n    (state, { match }) => {\r\n      const { id } = match.params\r\n      return {\r\n        article: getArticlesById(id, state),\r\n        isLoading: isAllArticlesLoading(state),\r\n        isError: isAllArticlesLoadingError(state)\r\n      }\r\n    },\r\n    {\r\n      fetchArticles,\r\n      addNewToArticles: addArticle,\r\n      updateExistingArticle: updateArticle\r\n    }\r\n  ),\r\n\r\n  withProps(({ match, article, isLoading, isError, fetchArticles }) => {\r\n    const { id } = match.params\r\n    if (!id) {\r\n      return {\r\n        article: {\r\n          title: '',\r\n          content: '',\r\n          author: '',\r\n          tags: []\r\n        }\r\n      }\r\n    } else if (!article && !isLoading && !isError) {\r\n      return fetchArticles()\r\n    }\r\n  }),\r\n\r\n  branch(({ isLoading }) => isLoading, renderComponent(() => 'Loading...')),\r\n  branch(\r\n    ({ isError }) => isError,\r\n    renderComponent(() => 'Some error happened...')\r\n  ),\r\n  flattenProp('article'),\r\n  withProps(({ history, match, addNewToArticles, updateExistingArticle }) => {\r\n    const { id } = match.params\r\n\r\n    const publishAction = id\r\n      ? updateExistingArticle.bind(null, id)\r\n      : addNewToArticles\r\n\r\n    return {\r\n      publishArticle: article => {\r\n        publishAction(article)\r\n        history.push('/')\r\n      }\r\n    }\r\n  }),\r\n)\r\n\r\nexport default enhancer(WriteBlog)\r\n","// @flow\r\nimport React from \"react\";\r\n\r\nimport \"../../grid.scss\";\r\n\r\nimport \"./ViewPost.scss\"\r\n\r\ntype ViewPostProps = {\r\n  location: Object,\r\n  article: Object\r\n}\r\n\r\nconst ViewPost = (props: ViewPostProps) => {\r\n  const article  = props.location.state.data;\r\n  return (\r\n    <div className={\"ViewPost\"}>\r\n      <h1 className={\"ViewPost__title\"}>{article.title}</h1>\r\n      <h3 className={\"ViewPost__author\"}>{article.author}</h3>\r\n      <p className={\"ViewPost__content\"}>{article.content}</p>\r\n      <ul className={\"ViewPost__tags\"}>\r\n        {article.tags.map(tag => (\r\n          <li className={\"ViewPost__tags_tag\"} key={tag.id}>{tag.text}</li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  )\r\n};\r\n\r\nexport default ViewPost;\r\n","// @flow\r\nimport React from 'react'\r\nimport { Route } from 'react-router-dom'\r\n\r\nimport MainPage from './MainPage'\r\nimport Posts from './Posts'\r\nimport WriteBlog from './WriteBlog'\r\nimport ViewPost from './ViewPost/ViewPost'\r\n\r\nimport '../grid.scss'\r\n\r\nconst Routes = () => (\r\n  <main className={'grid__cell_12'}>\r\n    <Route exact path={'/'} component={MainPage}/>\r\n    <Route path={'/layout'} component={Posts}/>\r\n\r\n    <Route exact path={'/edit-article'} component={WriteBlog}/>\r\n    <Route exact path={'/edit-article/:id'} component={WriteBlog}/>\r\n\r\n    <Route path={'/view_post'} component={ViewPost}/>\r\n  </main>\r\n)\r\n\r\n\r\nexport default Routes\r\n","import React from 'react'\r\nimport { NavLink, Link, Route } from 'react-router-dom'\r\n\r\nimport './Header.scss'\r\nimport BEM from '../../helpers/BEM'\r\n\r\nconst b = BEM('Header')\r\n\r\nconst MainButton = () => (\r\n  <Link to={'/edit-article'} className={b('write-blog')}>\r\n    <span className={b('write-blog_centered')}>Write New Blog!</span>\r\n  </Link>\r\n)\r\n\r\nconst Header = () => (\r\n  <div className={b()}>\r\n    <header className={b('header')}>\r\n      <NavLink className={b('left')} to={'/'} children={'Home'}>\r\n        <h1 className={b('logo-main')}>Drag'n'Blog</h1>\r\n        <p className={b('logo-secondary')}>flexible-blog</p>\r\n      </NavLink>\r\n\r\n      <div className={b('right')}>\r\n        <form action=\"\" className={b('search')}>\r\n          <input className={b('input')} placeholder=\"Search\"/>\r\n        </form>\r\n        <Route exact path={'/'} component={MainButton}/>\r\n        <Route exact path={'/layout'} component={MainButton}/>\r\n        <Link to={'/'} className={b('user')} children={'User'}/>\r\n      </div>\r\n    </header>\r\n  </div>\r\n)\r\n\r\nexport default Header\r\n","import React from 'react'\r\nimport Routes from './Routes'\r\n\r\nimport Header from './Header'\r\n\r\nimport '../grid.scss'\r\n\r\nconst App = () => (\r\n  <div className={'grid'}>\r\n    <header className={'grid__cell_12'}>\r\n      <Header/>\r\n    </header>\r\n\r\n    <Routes/>\r\n  </div>\r\n)\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport Provider from './components/Provider'\r\nimport App from './components/App'\r\nimport configureStore from './configureStore'\r\n\r\nReactDOM.render(\r\n  <Provider store={configureStore()}>\r\n    <App/>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)","import { applyMiddleware, createStore } from \"redux\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport rootReducer from \"./reducers\";\r\nimport thunk from \"redux-thunk\";\r\n\r\nexport default () =>\r\n  createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)));\r\n"],"sourceRoot":""}